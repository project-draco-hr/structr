{
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
  prefs.registerOnSharedPreferenceChangeListener(new SharedPreferences.OnSharedPreferenceChangeListener(){
    @Override public void onSharedPreferenceChanged(    SharedPreferences sp,    String string){
      updatePreferences(sp);
    }
  }
);
  if (socketFactory == null) {
    socketFactory=createSslSocketFactory(context,sslKeyStoreId,sslKeyStorePassword);
  }
}
