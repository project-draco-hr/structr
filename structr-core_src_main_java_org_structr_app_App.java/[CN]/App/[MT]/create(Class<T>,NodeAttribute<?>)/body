{
  final CreateNodeCommand<T> cmd=command(CreateNodeCommand.class);
  final TransactionCommand tx=command(TransactionCommand.class);
  return tx.execute(new StructrTransaction<T>(){
    @Override public T execute() throws FrameworkException {
      List<NodeAttribute<?>> attrs=new LinkedList<>(Arrays.asList(attributes));
      attrs.add(new NodeAttribute(AbstractNode.type,type.getSimpleName()));
      return cmd.execute(attrs);
    }
  }
);
}
