{
  final SearchNodeCommand<T> cmd=command(SearchNodeCommand.class);
  final TransactionCommand tx=command(TransactionCommand.class);
  return tx.execute(new StructrTransaction<List<T>>(){
    @Override public List<T> execute() throws FrameworkException {
      List<SearchAttribute<?>> searchAttrs=new LinkedList<>(Arrays.asList(attributes));
      searchAttrs.add(Search.andExactType(type));
      Result<T> result=cmd.execute(searchAttrs);
      return result.getResults();
    }
  }
);
}
