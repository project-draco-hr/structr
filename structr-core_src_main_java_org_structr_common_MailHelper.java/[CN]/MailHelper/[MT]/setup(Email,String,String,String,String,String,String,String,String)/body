{
  final Services services=Services.getInstance();
  final String smtpHost=services.getSmtpHost();
  final String smtpPort=services.getSmtpPort();
  final String smtpUser=services.getSmtpUser();
  final String smtpPassword=services.getSmtpPassword();
  mail.setCharset(charset);
  mail.setHostName(smtpHost);
  mail.setSmtpPort(Integer.parseInt(smtpPort));
  mail.setTLS(true);
  mail.setCharset(charset);
  mail.setHostName(smtpHost);
  mail.setSmtpPort(Integer.parseInt(smtpPort));
  if (StringUtils.isNotBlank(smtpUser) && StringUtils.isNotBlank(smtpPassword)) {
    mail.setAuthentication(smtpUser,smtpPassword);
  }
  mail.addTo(to,toName);
  mail.setFrom(from,fromName);
  if (StringUtils.isNotBlank(cc)) {
    mail.addCc(cc);
  }
  if (StringUtils.isNotBlank(bcc)) {
    mail.addBcc(bcc);
  }
  if (StringUtils.isNotBlank(bounce)) {
    mail.setBounceAddress(bounce);
  }
  mail.setSubject(subject);
}
