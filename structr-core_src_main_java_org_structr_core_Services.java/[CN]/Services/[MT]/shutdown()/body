{
  initializationDone=false;
  logger.log(Level.INFO,"Shutting down service layer");
  for (  Service service : serviceCache.values()) {
    try {
      if (service instanceof RunnableService) {
        RunnableService runnableService=(RunnableService)service;
        if (runnableService.isRunning()) {
          runnableService.stopService();
        }
      }
      service.shutdown();
    }
 catch (    Throwable t) {
      logger.log(Level.WARNING,"Failed to shut down {0}: {1}",new Object[]{service.getName(),t.getMessage()});
    }
  }
  serviceCache.clear();
  configuration.shutdown();
  singletonInstance=null;
  logger.log(Level.INFO,"Finished shutdown of service layer");
}
