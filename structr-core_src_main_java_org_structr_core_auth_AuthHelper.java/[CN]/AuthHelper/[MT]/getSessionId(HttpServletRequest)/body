{
  String existingSessionId=null;
  try {
    existingSessionId=request.getRequestedSessionId();
  }
 catch (  UnsupportedOperationException uoe) {
  }
  if (existingSessionId == null) {
    HttpSession session=request.getSession(true);
    if (session != null) {
      session.setMaxInactiveInterval(Services.getGlobalSessionTimeout());
      return session.getId();
    }
  }
  return existingSessionId;
}
