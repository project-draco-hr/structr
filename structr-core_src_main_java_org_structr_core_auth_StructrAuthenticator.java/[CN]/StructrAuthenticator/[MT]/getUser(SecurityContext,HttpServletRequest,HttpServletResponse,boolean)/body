{
  String userName=(String)request.getSession().getAttribute(USERNAME_KEY);
  List<SearchAttribute> attrs=new LinkedList<SearchAttribute>();
  attrs.add(Search.andExactTypeAndSubtypes(Principal.class.getSimpleName()));
  attrs.add(Search.andExactName(userName));
  Result userList=Services.command(securityContext,SearchNodeCommand.class).execute(attrs);
  Principal user=null;
  if (!userList.isEmpty()) {
    user=(Principal)userList.get(0);
  }
  return user;
}
