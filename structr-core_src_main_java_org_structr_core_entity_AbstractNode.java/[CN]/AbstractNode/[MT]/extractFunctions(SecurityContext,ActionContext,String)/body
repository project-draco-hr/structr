{
  Matcher functionMatcher=threadLocalFunctionMatcher.get();
  functionMatcher.reset(source);
  if (functionMatcher.matches()) {
    String functionGroup=functionMatcher.group(1);
    String parameter=functionMatcher.group(2);
    String functionName=functionGroup.substring(0,functionGroup.length());
    Function<Object,Object> function=functions.get(functionName);
    if (function != null) {
      if (parameter.contains(",")) {
        String[] parameters=split(parameter);
        Object[] results=new Object[parameters.length];
        for (int i=0; i < parameters.length; i++) {
          results[i]=extractFunctions(securityContext,actionContext,StringUtils.strip(parameters[i]));
        }
        return function.apply(this,results);
      }
 else {
        Object result=extractFunctions(securityContext,actionContext,StringUtils.strip(parameter));
        return function.apply(this,new Object[]{result});
      }
    }
  }
  if (StringUtils.isNotBlank(source) && StringUtils.isNumeric(source)) {
    return source;
  }
 else   if (source.startsWith("\"") && source.endsWith("\"")) {
    return source.substring(1,source.length() - 1);
  }
 else   if (source.startsWith("'") && source.endsWith("'")) {
    return source.substring(1,source.length() - 1);
  }
 else {
    return actionContext.getReferencedProperty(securityContext,this,source);
  }
}
