{
  RelationshipFactory<T> factory=new RelationshipFactory<T>(securityContext);
  RelationshipInterface template=getRelationshipForType(type);
  Direction dir=template.getDirectionForType(entityType).reverse();
  RelationshipType relType=template.getRelationshipType();
  Iterable<Relationship> rels=null;
  if (type != null && dir != null) {
    rels=dbNode.getRelationships(relType,dir);
  }
 else   if (type != null) {
    rels=dbNode.getRelationships(relType);
  }
 else   if (dir != null) {
    rels=dbNode.getRelationships(dir);
  }
  return new IterableAdapter<Relationship,T>(rels,factory);
}
