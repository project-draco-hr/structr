{
  if (key == null) {
    logger.log(Level.SEVERE,"Tried to set property with null key (action was denied)");
    throw new FrameworkException(422,"Tried to set property with null key (action was denied)",new NullArgumentToken(getClass().getSimpleName(),base));
  }
  try {
    if (key.isReadOnly() || (key.isWriteOnce() && (dbRelationship != null) && dbRelationship.hasProperty(key.dbName()))) {
      if (!readOnlyPropertiesUnlocked && !securityContext.isSuperUser()) {
        throw new FrameworkException(422,"Property " + key.jsonName() + " is read-only",new ReadOnlyPropertyToken(getClass().getSimpleName(),key));
      }
    }
    return key.setProperty(securityContext,this,value);
  }
  finally {
    this.readOnlyPropertiesUnlocked=false;
  }
}
