{
  final Set<String> viewProperties=new LinkedHashSet<>();
  final Set<String> validators=new LinkedHashSet<>();
  final Set<String> enums=new LinkedHashSet<>();
  final StringBuilder src=new StringBuilder();
  final Class baseType=AbstractNode.class;
  final String _className=getProperty(className);
  final Node rawNode=getNode();
  src.append("package org.structr.dynamic;\n\n");
  src.append("import ").append(baseType.getName()).append(";\n");
  src.append("import ").append(PropertyView.class.getName()).append(";\n");
  src.append("import ").append(View.class.getName()).append(";\n");
  src.append("import ").append(ValidationHelper.class.getName()).append(";\n");
  src.append("import ").append(ErrorBuffer.class.getName()).append(";\n");
  src.append("import org.structr.core.validator.*;\n");
  src.append("import org.structr.core.property.*;\n");
  src.append("import org.structr.core.notion.*;\n");
  src.append("import java.util.List;\n\n");
  src.append("public class ").append(_className).append(" extends ").append(baseType.getSimpleName()).append(" {\n\n");
  for (  final String propertyName : getProperties()) {
    if (rawNode.hasProperty(propertyName)) {
      final String rawType=rawNode.getProperty(propertyName).toString();
      final PropertyParser parser=getParserForRawValue(errorBuffer,_className,propertyName,rawType);
      if (parser != null) {
        src.append(parser.getPropertySource(errorBuffer));
        validators.addAll(parser.getGlobalValidators());
        enums.addAll(parser.getEnumDefinitions());
        viewProperties.add(propertyName);
      }
    }
  }
  for (  final NodeIsRelatedToNode outRel : getOutgoingRelationships(NodeIsRelatedToNode.class)) {
    src.append(outRel.getPropertySource(_className));
    viewProperties.add(outRel.getPropertyName(_className));
  }
  for (  final NodeIsRelatedToNode inRel : getIncomingRelationships(NodeIsRelatedToNode.class)) {
    src.append(inRel.getPropertySource(_className));
    viewProperties.add(inRel.getPropertyName(_className));
  }
  for (  final String enumDefition : enums) {
    src.append(enumDefition);
  }
  if (!viewProperties.isEmpty()) {
    src.append("\n\tpublic static final View defaultView = new View(").append(_className).append(".class, PropertyView.Public,\n");
    src.append("\t\t");
    for (final Iterator<String> it=viewProperties.iterator(); it.hasNext(); ) {
      src.append(it.next()).append("Property");
      if (it.hasNext()) {
        src.append(", ");
      }
    }
    src.append("\n\t);\n");
  }
  if (!validators.isEmpty()) {
    src.append("\n\t@Override\n");
    src.append("\tpublic boolean isValid(final ErrorBuffer errorBuffer) {\n\n");
    src.append("\t\tboolean error = false;\n\n");
    for (    final String validator : validators) {
      src.append("\t\terror |= ").append(validator).append(";\n");
    }
    src.append("\n\t\treturn !error;\n");
    src.append("\t}\n");
  }
  src.append("}\n");
  return src.toString();
}
