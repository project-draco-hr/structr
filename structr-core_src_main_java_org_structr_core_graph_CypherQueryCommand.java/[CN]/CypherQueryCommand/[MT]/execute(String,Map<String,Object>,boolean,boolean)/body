{
  GraphDatabaseService graphDb=(GraphDatabaseService)arguments.get("graphDb");
  RelationshipFactory relFactory=new RelationshipFactory(securityContext);
  NodeFactory nodeFactory=new NodeFactory(securityContext);
  List<GraphObject> resultList=new LinkedList<>();
  Result result=null;
  if (parameters != null) {
    result=graphDb.execute(query,parameters);
  }
 else {
    result=graphDb.execute(query);
  }
  while (result.hasNext()) {
    final Map<String,Object> row=result.next();
    for (    Entry<String,Object> entry : row.entrySet()) {
      String key=entry.getKey();
      Object value=entry.getValue();
      resultList.add((GraphObject)handleObject(nodeFactory,relFactory,key,value,includeHiddenAndDeleted,publicOnly,0));
    }
  }
  return resultList;
}
