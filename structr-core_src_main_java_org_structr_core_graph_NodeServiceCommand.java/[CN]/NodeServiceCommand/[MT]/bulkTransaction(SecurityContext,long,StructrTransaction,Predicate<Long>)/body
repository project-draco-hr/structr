{
  final App app=StructrApp.getInstance(securityContext);
  final AtomicLong objectCount=new AtomicLong(0L);
  while (!stopCondition.evaluate(securityContext,objectCount.get())) {
    app.beginTx();
    long loopCount=0;
    while (loopCount++ < commitCount && !stopCondition.evaluate(securityContext,objectCount.get())) {
      transaction.execute();
      objectCount.incrementAndGet();
    }
    app.commitTx();
  }
}
