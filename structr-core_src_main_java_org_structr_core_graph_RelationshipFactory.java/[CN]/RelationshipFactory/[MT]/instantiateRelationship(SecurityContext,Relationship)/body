{
  Class<T> relClass=null;
  T newRel=null;
  try {
    if (relClass == null && relationship.hasProperty(AbstractRelationship.combinedType.dbName())) {
      String combinedRelType=(String)relationship.getProperty(AbstractRelationship.combinedType.dbName());
      relClass=EntityContext.getNamedRelationClass(combinedRelType);
      if (relClass != null) {
        newRel=instantiateRelationship(securityContext,combinedRelType);
      }
    }
    if (relClass == null) {
      relClass=findNamedRelation(relationship);
    }
    if (relClass == null && SECURITY.name().equals(relationship.getType().name())) {
      relClass=(Class)SecurityRelationship.class;
    }
    if (relClass != null && newRel == null) {
      try {
        newRel=relClass.newInstance();
      }
 catch (      Throwable t2) {
        newRel=null;
      }
    }
  }
 catch (  Throwable t) {
  }
  if (newRel == null) {
    newRel=(T)EntityContext.getFactoryDefinition().createGenericRelationship();
  }
  newRel.init(securityContext,relationship);
  newRel.onRelationshipInstantiation();
  return newRel;
}
