{
  String nestedPath=path + dir.getName() + "/";
  ZipEntry dirEntry=new ZipEntry(nestedPath);
  zos.putNextEntry(dirEntry);
  File[] contents=dir.listFiles();
  if (contents != null) {
    for (    File file : contents) {
      if (file.isDirectory()) {
        exportDirectory(zos,file,nestedPath);
      }
 else {
        ZipEntry fileEntry=new ZipEntry(nestedPath + file.getName());
        fileEntry.setTime(file.lastModified());
        zos.putNextEntry(fileEntry);
        FileInputStream fis=new FileInputStream(file);
        IOUtils.copy(fis,zos);
        fis.close();
        zos.flush();
        zos.closeEntry();
      }
    }
  }
  zos.closeEntry();
}
