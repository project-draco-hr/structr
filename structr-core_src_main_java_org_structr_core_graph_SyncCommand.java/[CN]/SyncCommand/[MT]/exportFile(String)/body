{
  try {
    ZipOutputStream zos=new ZipOutputStream(new FileOutputStream(fileName));
    PrintWriter writer=new PrintWriter(new BufferedWriter(new OutputStreamWriter(zos)));
    zos.setLevel(6);
    exportDirectory(zos,new File("files"),"");
    exportDatabase(zos,writer);
    zos.finish();
    writer.close();
  }
 catch (  Throwable t) {
    t.printStackTrace();
    throw new FrameworkException(500,t.getMessage());
  }
}
