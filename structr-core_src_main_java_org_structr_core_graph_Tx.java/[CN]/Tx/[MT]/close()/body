{
  final ModificationQueue modificationQueue=cmd.finishTx();
{
    cmd=app.command(TransactionCommand.class).beginTx();
    if (doCallbacks && modificationQueue != null) {
      modificationQueue.doOuterCallbacks(securityContext);
      final List<ModificationEvent> modificationEvents=modificationQueue.getModificationEvents();
      for (      StructrTransactionListener listener : TransactionCommand.getTransactionListeners()) {
        listener.transactionCommited(securityContext,modificationEvents);
      }
      if (modificationQueue != null) {
        modificationQueue.clear();
      }
    }
    cmd.commitTx(doValidation);
    cmd.finishTx();
  }
}
