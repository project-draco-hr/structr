{
  if (value instanceof Collection) {
    final Integer index=(Integer)evaluate(securityContext,ctx,entity);
    if (index != null) {
      return CollectionUtils.get(value,index);
    }
 else {
      throw new FrameworkException(422,"Invalid expression: invalid array index: null.");
    }
  }
 else {
    throw new FrameworkException(422,"Invalid expression: expected collection, found " + value.getClass().getSimpleName() + ".");
  }
}
