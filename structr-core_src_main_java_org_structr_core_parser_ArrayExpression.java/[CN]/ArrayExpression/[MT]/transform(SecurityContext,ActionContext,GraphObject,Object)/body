{
  final Integer index=(Integer)evaluate(securityContext,ctx,entity);
  if (index != null) {
    if (value != null && (value instanceof Collection || value.getClass().isArray())) {
      return CollectionUtils.get(value,index);
    }
 else {
      throw new FrameworkException(422,"Invalid expression: expected collection, found " + (value != null ? value.getClass().getSimpleName() : "null") + ".");
    }
  }
 else {
    throw new FrameworkException(422,"Invalid expression: invalid array index: null.");
  }
}
