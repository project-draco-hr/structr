{
  if (obj instanceof AbstractNode) {
    AbstractNode sourceNode=(AbstractNode)obj;
    if (collection != null && !collection.isEmpty()) {
      for (      GraphObject targetNode : collection) {
        if (targetNode != null) {
          createRelationship(securityContext,sourceNode,(AbstractNode)targetNode);
        }
      }
    }
 else {
      List<T> existingCollection=getProperty(securityContext,obj,true);
      if (existingCollection == null || (existingCollection != null && existingCollection.isEmpty())) {
        return;
      }
      for (      GraphObject targetNode : existingCollection) {
        removeRelationship(securityContext,sourceNode,(AbstractNode)targetNode);
      }
    }
  }
 else {
    logger.log(Level.WARNING,"Property {0} is registered on illegal type {1}",new Object[]{this,obj.getClass()});
  }
}
