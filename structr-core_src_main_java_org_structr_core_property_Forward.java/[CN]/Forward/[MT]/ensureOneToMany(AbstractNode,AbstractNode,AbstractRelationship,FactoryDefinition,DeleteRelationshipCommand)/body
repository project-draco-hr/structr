{
  Class newRelationshipClass=newRel.getClass();
  Class sourceType=sourceNode.getClass();
  for (  AbstractRelationship rel : targetNode.getReverseRelationships(Forward.this.relationClass)) {
    if (rel.equals(newRel)) {
      continue;
    }
    Class relationshipClass=rel.getClass();
    boolean isGeneric=factoryDefinition.isGeneric(relationshipClass);
    AbstractNode otherNode=rel.getOtherNode(targetNode);
    Class otherClass=otherNode.getClass();
    boolean removeRel=sourceType.isAssignableFrom(otherClass) || (!isGeneric && newRelationshipClass.isAssignableFrom(relationshipClass));
    if (!removeRel) {
      for (      Class iface : EntityContext.getInterfacesForType(sourceType)) {
        removeRel|=iface.isAssignableFrom(otherClass);
      }
    }
    if (removeRel) {
      deleteRel.execute(rel);
    }
  }
}
