{
  if (clearTextPassword != null) {
    if (validationInfo != null) {
      String errorType=validationInfo.getErrorType();
      PropertyKey errorKey=validationInfo.getErrorKey();
      int minLength=validationInfo.getMinLength();
      if (minLength > 0 && clearTextPassword.length() < minLength) {
        throw new FrameworkException(errorType,new TooShortToken(errorKey,minLength));
      }
    }
    String salt=RandomStringUtils.randomAlphanumeric(16);
    obj.setProperty(Principal.salt,salt);
    return super.setProperty(securityContext,obj,AuthHelper.getHash(clearTextPassword,salt));
  }
 else {
    return super.setProperty(securityContext,obj,null);
  }
}
