{
  if (diagnostic.getKind().equals(Kind.ERROR)) {
    final JavaFileObject obj=diagnostic.getSource();
    String name="unknown";
    if (obj != null && obj instanceof CharSequenceJavaFileObject) {
      name=((CharSequenceJavaFileObject)obj).getClassName();
    }
    errorBuffer.add(name,new DiagnosticErrorToken(diagnostic));
    logger.log(Level.WARNING,"Unable to compile dynamic entity {0}: {1}",new Object[]{name,diagnostic.getMessage(Locale.ENGLISH)});
  }
}
