{
  try {
    final AbstractRelationship rel=((List<AbstractRelationship>)createTestRelationships(RelType.IS_AT,1)).get(0);
    final PropertyKey key1=new StringProperty("jghsdkhgshdhgsdjkfgh").indexed();
    final String val1="54354354546806849870";
    Services.command(securityContext,TransactionCommand.class).execute(new StructrTransaction(){
      @Override public Object execute() throws FrameworkException {
        rel.setProperty(key1,val1);
        return null;
      }
    }
);
    assertTrue(rel.getProperty(key1).equals(val1));
    List<SearchAttribute> searchAttributes=new LinkedList<SearchAttribute>();
    searchAttributes.add(Search.andExactProperty(securityContext,key1,val1));
    Result<AbstractRelationship> result=searchRelationshipCommand.execute(searchAttributes);
    assertTrue(result.size() == 1);
    assertTrue(result.get(0).equals(rel));
    searchAttributes.clear();
    final String val2="??lllldj??oa8w4rasf";
    Services.command(securityContext,TransactionCommand.class).execute(new StructrTransaction(){
      @Override public Object execute() throws FrameworkException {
        rel.setProperty(key1,val2);
        return null;
      }
    }
);
    searchAttributes.add(Search.andExactProperty(securityContext,key1,val2));
    assertTrue(result.size() == 1);
    assertTrue(result.get(0).equals(rel));
  }
 catch (  FrameworkException ex) {
    logger.log(Level.SEVERE,ex.toString());
    fail("Unexpected exception");
  }
}
