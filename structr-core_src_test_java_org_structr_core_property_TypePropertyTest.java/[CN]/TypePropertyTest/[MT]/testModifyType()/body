{
  final Set<Label> labelsBefore=new LinkedHashSet<>();
  final Set<Label> labelsAfter=new LinkedHashSet<>();
  String id=null;
  labelsBefore.add(DynamicLabel.label(AccessControllable.class.getSimpleName()));
  labelsBefore.add(DynamicLabel.label(TestFour.class.getSimpleName()));
  labelsAfter.add(DynamicLabel.label(AccessControllable.class.getSimpleName()));
  labelsAfter.add(DynamicLabel.label(TestFive.class.getSimpleName()));
  try (final Tx tx=app.tx()){
    final TestFour testEntity=createTestNode(TestFour.class);
    assertNotNull(testEntity);
    assertTrue(Iterables.toSet(testEntity.getNode().getLabels()).containsAll(labelsBefore));
    id=testEntity.getUuid();
    testEntity.setProperty(GraphObject.type,TestFive.class.getSimpleName());
    tx.success();
  }
 catch (  FrameworkException fex) {
    fex.printStackTrace();
    fail("Unexpected exception");
  }
  try (final Tx tx=app.tx()){
    final TestFive testEntity=app.get(TestFive.class,id);
    assertNotNull(testEntity);
    assertTrue(Iterables.toSet(testEntity.getNode().getLabels()).containsAll(labelsAfter));
  }
 catch (  FrameworkException fex) {
    fex.printStackTrace();
    fail("Unexpected exception");
  }
}
