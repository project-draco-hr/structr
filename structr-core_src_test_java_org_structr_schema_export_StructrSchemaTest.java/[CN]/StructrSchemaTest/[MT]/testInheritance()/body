{
  try {
    final JsonSchema sourceSchema=StructrSchema.createFromDatabase(app);
    final JsonType contact=sourceSchema.addType("Contact").setExtends(StructrApp.getSchemaId(AbstractUser.class));
    final JsonType customer=sourceSchema.addType("Customer").setExtends(contact);
    final String schema=sourceSchema.toString();
    final Map<String,Object> map=new GsonBuilder().create().fromJson(schema,Map.class);
    testMapPathValue(map,"definitions.Contact.type","object");
    testMapPathValue(map,"definitions.Contact.$extends","https://structr.org/v1.1/definitions/AbstractUser");
    testMapPathValue(map,"definitions.Customer.type","object");
    testMapPathValue(map,"definitions.Customer.$extends","#/definitions/Contact");
    compareSchemaRoundtrip(sourceSchema);
  }
 catch (  Exception t) {
    t.printStackTrace();
    fail("Unexpected exception.");
  }
}
