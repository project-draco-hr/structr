{
  try {
    final JsonSchema sourceSchema=StructrSchema.createFromDatabase(app);
    final JsonType customer=sourceSchema.addType("Customer");
    customer.addStringProperty("name","public","ui").setRequired(true).setUnique(true);
    customer.addStringProperty("street","public","ui");
    customer.addStringProperty("city","public","ui");
    customer.addDateProperty("birthday","public","ui");
    customer.addEnumProperty("status","public","ui").setEnums("active","retired","none");
    customer.addIntegerProperty("count","public","ui").setMinimum(1).setMaximum(10,true);
    customer.addNumberProperty("number","public","ui").setMinimum(2.0,true).setMaximum(5.0,true);
    customer.addLongProperty("loong","public","ui").setMinimum(20,true).setMaximum(50);
    customer.addBooleanProperty("isCustomer","public","ui");
    customer.addScriptProperty("displayName","public","ui").setSource("concat(this.name, '.', this.id)");
    final String schema=sourceSchema.toString();
    final Map<String,Object> map=new GsonBuilder().create().fromJson(schema,Map.class);
    testMapPathValue(map,"definitions.Customer.type","object");
    testMapPathValue(map,"definitions.Customer.required.0","name");
    testMapPathValue(map,"definitions.Customer.properties.city.unique",null);
    testMapPathValue(map,"definitions.Customer.properties.count.type","integer");
    testMapPathValue(map,"definitions.Customer.properties.count.minimum",1.0);
    testMapPathValue(map,"definitions.Customer.properties.count.maximum",10.0);
    testMapPathValue(map,"definitions.Customer.properties.count.exclusiveMaximum",true);
    testMapPathValue(map,"definitions.Customer.properties.number.type","number");
    testMapPathValue(map,"definitions.Customer.properties.number.minimum",2.0);
    testMapPathValue(map,"definitions.Customer.properties.number.maximum",5.0);
    testMapPathValue(map,"definitions.Customer.properties.number.exclusiveMinimum",true);
    testMapPathValue(map,"definitions.Customer.properties.number.exclusiveMaximum",true);
    testMapPathValue(map,"definitions.Customer.properties.loong.type","long");
    testMapPathValue(map,"definitions.Customer.properties.loong.minimum",20.0);
    testMapPathValue(map,"definitions.Customer.properties.loong.maximum",50.0);
    testMapPathValue(map,"definitions.Customer.properties.loong.exclusiveMinimum",true);
    testMapPathValue(map,"definitions.Customer.properties.isCustomer.type","boolean");
    testMapPathValue(map,"definitions.Customer.properties.displayName.type","script");
    testMapPathValue(map,"definitions.Customer.properties.displayName.source","concat(this.name, '.', this.id)");
    testMapPathValue(map,"definitions.Customer.properties.name.type","string");
    testMapPathValue(map,"definitions.Customer.properties.name.unique",true);
    testMapPathValue(map,"definitions.Customer.properties.street.type","string");
    testMapPathValue(map,"definitions.Customer.properties.street.type","string");
    testMapPathValue(map,"definitions.Customer.properties.status.type","string");
    testMapPathValue(map,"definitions.Customer.properties.status.enum.0","active");
    testMapPathValue(map,"definitions.Customer.properties.status.enum.1","none");
    testMapPathValue(map,"definitions.Customer.properties.status.enum.2","retired");
    testMapPathValue(map,"definitions.Customer.views.public.0","birthday");
    testMapPathValue(map,"definitions.Customer.views.public.1","city");
    testMapPathValue(map,"definitions.Customer.views.public.2","count");
    testMapPathValue(map,"definitions.Customer.views.public.3","displayName");
    testMapPathValue(map,"definitions.Customer.views.public.4","isCustomer");
    testMapPathValue(map,"definitions.Customer.views.public.5","loong");
    testMapPathValue(map,"definitions.Customer.views.public.6","name");
    testMapPathValue(map,"definitions.Customer.views.public.7","number");
    testMapPathValue(map,"definitions.Customer.views.public.8","status");
    testMapPathValue(map,"definitions.Customer.views.public.9","street");
    testMapPathValue(map,"definitions.Customer.views.ui.0","birthday");
    testMapPathValue(map,"definitions.Customer.views.ui.1","city");
    testMapPathValue(map,"definitions.Customer.views.ui.2","count");
    testMapPathValue(map,"definitions.Customer.views.ui.3","displayName");
    testMapPathValue(map,"definitions.Customer.views.ui.4","isCustomer");
    testMapPathValue(map,"definitions.Customer.views.ui.5","loong");
    testMapPathValue(map,"definitions.Customer.views.ui.6","name");
    testMapPathValue(map,"definitions.Customer.views.ui.7","number");
    testMapPathValue(map,"definitions.Customer.views.ui.8","status");
    testMapPathValue(map,"definitions.Customer.views.ui.9","street");
    compareSchemaRoundtrip(sourceSchema);
  }
 catch (  Exception t) {
    t.printStackTrace();
    fail("Unexpected exception.");
  }
}
