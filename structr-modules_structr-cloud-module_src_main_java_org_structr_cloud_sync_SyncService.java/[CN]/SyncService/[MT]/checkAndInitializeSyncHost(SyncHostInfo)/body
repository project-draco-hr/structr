{
  final String masterId=StructrApp.getInstance().getInstanceId();
  final SimpleDateFormat df=new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
  final long localSyncTimestamp=StructrApp.getInstance().getGlobalSetting(masterId + ".lastModified",0L);
  if (localSyncTimestamp == 0L) {
    synchronizeSlave(host);
  }
 else {
    if (host.getLastSyncTimestamp() != localSyncTimestamp) {
      logger.log(Level.INFO,"Replication host {0} is out of sync, last remote update was {1} whereas last local update was {2}",new Object[]{host,df.format(host.getLastSyncTimestamp()),df.format(localSyncTimestamp)});
      synchronizeSlave(host);
    }
 else {
      logger.log(Level.INFO,"Replication host {0} is in sync, last update was {1}",new Object[]{host,df.format(localSyncTimestamp)});
    }
  }
}
