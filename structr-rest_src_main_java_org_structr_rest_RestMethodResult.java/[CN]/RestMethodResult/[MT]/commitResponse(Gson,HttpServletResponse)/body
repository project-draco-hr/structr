{
  for (  Entry<String,String> header : headers.entrySet()) {
    response.setHeader(header.getKey(),header.getValue());
  }
  response.setStatus(responseCode);
  try {
    Writer writer=response.getWriter();
    if (content != null) {
      Result result=new Result(this.content,this.content.size(),this.content.size() > 1 || serializeSingleObjectAsCollection,false);
      gson.toJson(result,writer);
    }
    writer.flush();
    writer.close();
  }
 catch (  Throwable t) {
    logger.log(Level.WARNING,"Unable to commit HttpServletResponse",t);
  }
}
