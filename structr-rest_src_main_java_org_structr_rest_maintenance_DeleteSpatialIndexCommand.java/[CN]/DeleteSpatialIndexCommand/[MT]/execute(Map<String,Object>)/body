{
  GraphDatabaseService graphDb=Services.getService(NodeService.class).getGraphDb();
  TraversalDescription description=Traversal.description().depthFirst().uniqueness(Uniqueness.NODE_RECENT).relationships(org.neo4j.collections.rtree.RTreeRelationshipTypes.RTREE_REFERENCE,Direction.OUTGOING);
  Node referenceNode=graphDb.getNodeById(0);
  Traverser traverser=description.traverse(referenceNode);
  for (  Node node : traverser.nodes()) {
    logger.log(Level.INFO,"Deleting node {0}",node);
    try {
      for (      Relationship rel : node.getRelationships()) {
        rel.delete();
      }
      node.delete();
    }
 catch (    Throwable t) {
      t.printStackTrace();
    }
  }
}
