{
  final String mode=(String)attributes.get("mode");
  if (mode != null) {
    if ("create".equals(mode)) {
      createSnapshot(attributes);
    }
 else     if ("restore".equals(mode)) {
      restoreSnapshot(attributes);
    }
  }
 else {
    throw new FrameworkException(500,"No snapshot mode supplied, aborting.");
  }
}
