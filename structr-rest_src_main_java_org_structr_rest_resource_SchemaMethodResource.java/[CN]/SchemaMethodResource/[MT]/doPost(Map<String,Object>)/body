{
  if (wrappedResource != null && wrappedResource instanceof TypeResource) {
    final App app=StructrApp.getInstance(securityContext);
    final TypeResource other=(TypeResource)wrappedResource;
    final Class type=other.getEntityClass();
    if (type != null) {
      try (final Tx tx=app.tx()){
        final SchemaNode schemaNode=app.nodeQuery(SchemaNode.class).andName(type.getSimpleName()).getFirst();
        if (schemaNode != null) {
          final SchemaMethod method=app.nodeQuery(SchemaMethod.class).and(SchemaMethod.name,methodName).and(SchemaMethod.schemaNode,schemaNode).getFirst();
          if (method != null) {
            final String source=method.getProperty(SchemaMethod.source);
            if (StringUtils.isNotBlank(source)) {
              final Object obj=Actions.execute(securityContext,null,"${" + source + "}",propertySet);
              if (obj instanceof RestMethodResult) {
                return (RestMethodResult)obj;
              }
 else {
                final RestMethodResult result=new RestMethodResult(200);
                StaticRelationshipResource.unwrapTo(obj,result);
                return result;
              }
            }
          }
        }
        tx.success();
      }
     }
  }
  throw new IllegalPathException("Type and method name do not match the given path.");
}
