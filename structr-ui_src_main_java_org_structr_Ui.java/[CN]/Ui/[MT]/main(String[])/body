{
  try {
    HtmlServlet htmlServlet=new HtmlServlet();
    ServletHolder htmlServletHolder=new ServletHolder(htmlServlet);
    Map<String,String> htmlInitParams=new HashMap<String,String>();
    htmlInitParams.put(AuthenticationService.SERVLET_PARAMETER_AUTHENTICATOR,org.structr.web.auth.HttpAuthenticator.class.getName());
    htmlServletHolder.setInitParameters(htmlInitParams);
    htmlServletHolder.setInitOrder(1);
    CsvServlet csvServlet=new CsvServlet(DefaultResourceProvider.class.newInstance(),PropertyView.All,AbstractNode.uuid);
    ServletHolder csvServletHolder=new ServletHolder(csvServlet);
    Map<String,String> servletParams=new HashMap<String,String>();
    servletParams.put(AuthenticationService.SERVLET_PARAMETER_AUTHENTICATOR,org.structr.web.auth.HttpAuthenticator.class.getName());
    servletParams.put(AuthenticationService.SERVLET_PARAMETER_USER_AUTO_CREATE,Boolean.toString(true));
    csvServletHolder.setInitParameters(servletParams);
    csvServletHolder.setInitOrder(2);
    WebSocketServlet wsServlet=new WebSocketServlet(AbstractNode.uuid);
    ServletHolder wsServletHolder=new ServletHolder(wsServlet);
    Map<String,String> wsInitParams=new HashMap<String,String>();
    wsInitParams.put(AuthenticationService.SERVLET_PARAMETER_AUTHENTICATOR,org.structr.web.auth.UiAuthenticator.class.getName());
    wsInitParams.put("IdProperty","uuid");
    wsServletHolder.setInitParameters(wsInitParams);
    wsServletHolder.setInitOrder(3);
    Structr.createServer(Ui.class,"structr UI",8082).addServlet("/structr/html/*",htmlServletHolder).addServlet("/structr/ws/*",wsServletHolder).addServlet("/structr/csv/*",csvServletHolder).enableRewriteFilter().resourceProvider(UiResourceProvider.class).authenticator(UiAuthenticator.class).userAutoCreate(true).start(true);
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
