{
  if (socket.isConnected() && !socket.isClosed()) {
    try {
      decrypter=Cipher.getInstance("RC4");
      encrypter=Cipher.getInstance("RC4");
      setEncryptionKey("StructrInitialEncryptionKey");
      sender=new Sender(socket,new ObjectOutputStream(new GZIPOutputStream(new CipherOutputStream(socket.getOutputStream(),encrypter),true)));
      receiver=new Receiver(socket,new ObjectInputStream(new GZIPInputStream(new CipherInputStream(socket.getInputStream(),decrypter))));
      receiver.start();
      sender.start();
    }
 catch (    Throwable t) {
      t.printStackTrace();
    }
  }
}
