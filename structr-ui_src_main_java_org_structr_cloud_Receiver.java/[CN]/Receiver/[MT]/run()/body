{
  while (connection.isConnected()) {
    try {
      final Message message=(Message)inputStream.readObject();
      if (message != null) {
        inputQueue.add(message);
      }
    }
 catch (    Throwable t) {
      connection.close();
    }
  }
}
