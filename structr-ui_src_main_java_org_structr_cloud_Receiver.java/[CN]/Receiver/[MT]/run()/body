{
  while (connection.isConnected()) {
    try {
      final Message message=Message.deserialize(reader);
      if (message != null) {
        inputQueue.add(message);
      }
    }
 catch (    Throwable t) {
      connection.close();
    }
  }
}
