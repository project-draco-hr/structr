{
  while (isConnected()) {
    try {
      final Message request=receiver.receive();
      if (request != null) {
        final Message response=request.process(this,context);
        if (response != null) {
          sender.send(response);
        }
      }
      Thread.sleep(10);
    }
 catch (    Throwable t) {
      t.printStackTrace();
    }
  }
  shutdown();
}
