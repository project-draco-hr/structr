{
  try {
    final NodeDataContainer receivedNodeData=(NodeDataContainer)receivedData;
    final PropertyMap properties=PropertyMap.databaseTypeToJavaType(SecurityContext.getSuperUserInstance(),receivedNodeData.getType(),receivedNodeData.getProperties());
    final String uuid=receivedNodeData.getSourceNodeId();
    NodeInterface newOrExistingNode=null;
    final NodeInterface existingCandidate=app.nodeQuery().and(GraphObject.id,uuid).getFirst();
    if (existingCandidate != null && existingCandidate instanceof NodeInterface) {
      newOrExistingNode=(NodeInterface)existingCandidate;
      ((Syncable)newOrExistingNode).updateFrom(properties);
    }
 else {
      newOrExistingNode=app.create(receivedNodeData.getType(),properties);
    }
    idMap.put(receivedNodeData.getSourceNodeId(),newOrExistingNode.getUuid());
    return newOrExistingNode;
  }
 catch (  FrameworkException fex) {
    fex.printStackTrace();
  }
  return null;
}
