{
  try {
    final RelationshipDataContainer receivedRelationshipData=(RelationshipDataContainer)receivedData;
    final String sourceStartNodeId=receivedRelationshipData.getSourceStartNodeId();
    final String sourceEndNodeId=receivedRelationshipData.getSourceEndNodeId();
    final String targetStartNodeId=idMap.get(sourceStartNodeId);
    final String targetEndNodeId=idMap.get(sourceEndNodeId);
    if (targetStartNodeId != null && targetEndNodeId != null) {
      final NodeInterface targetStartNode=(NodeInterface)app.get(targetStartNodeId);
      final NodeInterface targetEndNode=(NodeInterface)app.get(targetEndNodeId);
      final Class relType=receivedRelationshipData.getType();
      if (targetStartNode != null && targetEndNode != null) {
        final PropertyMap properties=PropertyMap.databaseTypeToJavaType(SecurityContext.getSuperUserInstance(),relType,receivedRelationshipData.getProperties());
        return app.create(targetStartNode,targetEndNode,relType,properties);
      }
    }
 else {
      logger.log(Level.WARNING,"Could not store relationship {0} -> {1}",new Object[]{sourceStartNodeId,sourceEndNodeId});
    }
  }
 catch (  FrameworkException fex) {
    fex.printStackTrace();
  }
  return null;
}
