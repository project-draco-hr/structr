{
  client.send(new PushNodeRequestContainer());
  context.progress();
  client.waitForMessage();
  sequenceNumber=0;
  final Set<NodeInterface> nodes=exportSet.getNodes();
  for (  final NodeInterface n : nodes) {
    if (n instanceof File) {
      sendFile(context,client,(File)n,CloudService.CHUNK_SIZE);
    }
 else {
      client.send(new NodeDataContainer(n,sequenceNumber));
      context.progress();
      if (((sequenceNumber + 1) % LIVE_PACKET_COUNT) == 0) {
        client.waitForMessage();
      }
      sequenceNumber++;
    }
  }
  sequenceNumber=0;
  Set<RelationshipInterface> rels=exportSet.getRelationships();
  for (  RelationshipInterface r : rels) {
    if (nodes.contains(r.getSourceNode()) && nodes.contains(r.getTargetNode())) {
      client.send(new RelationshipDataContainer(r,sequenceNumber));
      context.progress();
      if (((sequenceNumber + 1) % LIVE_PACKET_COUNT) == 0) {
        client.waitForMessage();
      }
      sequenceNumber++;
    }
  }
  return true;
}
