{
  if (line.startsWith("Console.setMode('javascript')") || line.startsWith("Console.setMode(\"javascript\")")) {
    mode=ConsoleMode.javascript;
    output.println("Mode set to 'JavaScript'.");
  }
 else   if (line.startsWith("Console.setMode('cypher')") || line.startsWith("Console.setMode(\"cypher\")")) {
    mode=ConsoleMode.cypher;
    output.println("Mode set to 'Cypher'.");
  }
 else   if (line.startsWith("Console.setMode('structrscript')") || line.startsWith("Console.setMode(\"structrscript\")")) {
    mode=ConsoleMode.structrscript;
    output.println("Mode set to 'StructrScript'.");
  }
 else   if (line.startsWith("Console.setMode('admin')") || line.startsWith("Console.setMode(\"admin\")")) {
    mode=ConsoleMode.admin;
    output.println("Mode set to 'AdminShell'. Type 'help' to get a list of commands.");
  }
 else   if (line.startsWith("Console.setMode('rest')") || line.startsWith("Console.setMode(\"rest\")")) {
    mode=ConsoleMode.rest;
    output.println("Mode set to 'REST'. Type 'help' to get a list of commands.");
  }
 else {
switch (mode) {
case cypher:
      runCypher(line,output);
    break;
case javascript:
  runJavascript(line,output);
break;
case structrscript:
runStructrScript(line,output);
break;
case admin:
runAdminShell(line,output);
break;
case rest:
RestCommand.run(this,line,output);
break;
}
}
}
