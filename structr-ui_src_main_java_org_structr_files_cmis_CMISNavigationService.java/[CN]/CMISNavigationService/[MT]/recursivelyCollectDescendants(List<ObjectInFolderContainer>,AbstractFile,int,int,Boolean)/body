{
  if (depth > maxDepth) {
    return;
  }
  final CMISObjectInFolderWrapper wrapper=new CMISObjectInFolderWrapper(includeAllowableActions);
  final ObjectInFolderContainerImpl impl=new ObjectInFolderContainerImpl();
  final List<ObjectInFolderContainer> childContainerList=new LinkedList<>();
  final String pathSegment=child.getName();
  impl.setObject(wrapper.wrapObjectData(wrapper.wrapGraphObject(child),pathSegment));
  impl.setChildren(childContainerList);
  list.add(impl);
  final List<AbstractFile> children=child.getProperty(AbstractFile.children);
  Collections.sort(children,new GraphObjectComparator(AbstractNode.name,false));
  for (  final AbstractFile folderChild : children) {
    recursivelyCollectDescendants(childContainerList,folderChild,maxDepth,depth + 1,includeAllowableActions);
  }
}
