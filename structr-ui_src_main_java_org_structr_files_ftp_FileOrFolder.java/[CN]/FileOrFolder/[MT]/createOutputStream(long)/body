{
  try (Tx tx=StructrApp.getInstance().tx()){
    if (structrFile == null) {
      final Folder parentFolder=(Folder)FileHelper.getFileByAbsolutePath(StringUtils.substringBeforeLast(newPath,"/"));
      final App app=StructrApp.getInstance();
      try {
        structrFile=FileHelper.createFile(SecurityContext.getSuperUserInstance(),new byte[0],null,File.class);
        structrFile.setProperty(AbstractNode.type,File.class.getSimpleName());
        structrFile.setProperty(AbstractNode.owner,owner.getStructrUser());
        structrFile.setProperty(AbstractNode.name,getName());
        if (parentFolder != null) {
          structrFile.setProperty(AbstractFile.parent,parentFolder);
        }
      }
 catch (      FrameworkException ex) {
        logger.log(Level.SEVERE,null,ex);
        return null;
      }
    }
    tx.success();
    return ((File)structrFile).getOutputStream();
  }
 catch (  FrameworkException fex) {
  }
  return null;
}
