{
  List<FtpFile> ftpFiles=new ArrayList();
  String requestedPath=getAbsolutePath();
  logger.log(Level.INFO,"Children of {0} requested",requestedPath);
  if ("/".equals(requestedPath)) {
    try {
      Result<Folder> results=StructrApp.getInstance().nodeQuery(Folder.class).getResult();
      logger.log(Level.INFO,"{0} folders found",results.size());
      for (      Folder f : results.getResults()) {
        if (f.getProperty(AbstractFile.parent) != null) {
          continue;
        }
        FtpFile ftpFile=new StructrFtpFolder(f);
        logger.log(Level.INFO,"Folder found: {0}",ftpFile.getAbsolutePath());
        ftpFiles.add(ftpFile);
      }
    }
 catch (    FrameworkException ex) {
      logger.log(Level.SEVERE,null,ex);
    }
    try {
      Result<File> results=StructrApp.getInstance().nodeQuery(File.class).getResult();
      logger.log(Level.INFO,"{0} files found",results.size());
      for (      File f : results.getResults()) {
        if (f.getProperty(AbstractFile.parent) != null) {
          continue;
        }
        logger.log(Level.FINEST,"Structr file found: {0}",f);
        FtpFile ftpFile=new StructrFtpFile(f);
        logger.log(Level.FINE,"File found: {0}",ftpFile.getAbsolutePath());
        ftpFiles.add(ftpFile);
      }
    }
 catch (    FrameworkException ex) {
      logger.log(Level.SEVERE,null,ex);
    }
    return ftpFiles;
  }
  List<Folder> folders=((Folder)structrFile).getProperty(Folder.folders);
  for (  Folder f : folders) {
    FtpFile ftpFile=new StructrFtpFolder(f);
    logger.log(Level.INFO,"Subfolder found: {0}",ftpFile.getAbsolutePath());
    ftpFiles.add(ftpFile);
  }
  List<File> files=((Folder)structrFile).getProperty(Folder.files);
  for (  File f : files) {
    FtpFile ftpFile=new StructrFtpFile(f);
    logger.log(Level.INFO,"File found: {0}",ftpFile.getAbsolutePath());
    ftpFiles.add(ftpFile);
  }
  return ftpFiles;
}
