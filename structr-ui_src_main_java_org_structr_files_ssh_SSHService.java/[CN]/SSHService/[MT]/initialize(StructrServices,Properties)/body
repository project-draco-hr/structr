{
  server=SshServer.setUpDefaultServer();
  server.setKeyPairProvider(new SimpleGeneratorHostKeyProvider("db/structr_hostkey"));
  server.setPort(Services.parseInt(APPLICATION_SSH_PORT,8022));
  server.setPasswordAuthenticator(this);
  server.setPublickeyAuthenticator(this);
  server.setFileSystemFactory(this);
  server.setSubsystemFactories(getSftpSubsystem());
  server.setShellFactory(this);
  server.setCommandFactory(new ScpCommandFactory(this));
  try {
    server.start();
    running=true;
  }
 catch (  IOException ex) {
    Logger.getLogger(SSHService.class.getName()).log(Level.SEVERE,null,ex);
  }
}
