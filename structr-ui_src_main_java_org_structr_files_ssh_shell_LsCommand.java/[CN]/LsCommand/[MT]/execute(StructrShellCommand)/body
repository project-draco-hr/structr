{
  final App app=StructrApp.getInstance(SecurityContext.getInstance(user,AccessMode.Backend));
  try (final Tx tx=app.tx()){
    final Folder currentFolder=parent.getCurrentFolder();
    if (currentFolder != null) {
      listFolder(currentFolder.getProperty(AbstractFile.children));
    }
 else {
      listFolder(app.nodeQuery(AbstractFile.class).and(AbstractFile.parent,null).getAsList());
    }
    tx.success();
  }
 catch (  FrameworkException fex) {
    fex.printStackTrace();
  }
}
