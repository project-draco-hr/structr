{
  Principal user=AuthHelper.getUserForUsernameAndPassword(securityContext,userName,password);
  if (user != null) {
    request.getSession().setAttribute(SESSION_USER,user);
    securityContext.setUser(user);
    try {
      request.login(userName,password);
      request.authenticate(response);
    }
 catch (    Exception ex) {
      Logger.getLogger(HttpAuthenticator.class.getName()).log(Level.SEVERE,null,ex);
    }
  }
  return user;
}
