{
  Principal user=AuthHelper.getUserForUsernameAndPassword(SecurityContext.getSuperUserInstance(),userName,password);
  if (user != null) {
    securityContext.setUser(user);
    String sessionIdFromRequest=request.getRequestedSessionId();
    try {
      user.setProperty(Principal.sessionId,sessionIdFromRequest);
    }
 catch (    Exception ex) {
      logger.log(Level.SEVERE,null,ex);
    }
  }
  return user;
}
