{
  CreateNodeCommand<Image> createNodeCommand=StructrApp.getInstance(securityContext).command(CreateNodeCommand.class);
  PropertyMap props=new PropertyMap();
  props.put(AbstractNode.type,imageType == null ? Image.class.getSimpleName() : imageType.getSimpleName());
  props.put(Image.isThumbnail,markAsThumbnail);
  Image newImage=createNodeCommand.execute(props);
  if (imageData != null && imageData.length > 0) {
    setFileData(newImage,imageData,contentType);
  }
  return newImage;
}
