{
  try (final InputStream is=getInputStream()){
    final NodeService nodeService=Services.getInstance().getService(NodeService.class);
    final Index<Node> fulltextIndex=nodeService.getNodeIndex(NodeService.NodeIndex.fulltext);
    final FulltextTokenizer tokenizer=new FulltextTokenizer();
    final String indexKeyName=indexedContent.jsonName();
    final AutoDetectParser parser=new AutoDetectParser();
    final Node node=getNode();
    parser.parse(is,new BodyContentHandler(tokenizer),new Metadata());
    setProperty(extractedContent,tokenizer.getRawText());
    tokenizer.write(getName());
    final Principal _owner=getProperty(owner);
    if (_owner != null) {
      final String ownerName=_owner.getName();
      if (ownerName != null) {
        tokenizer.write(ownerName);
      }
      final String eMail=_owner.getProperty(User.eMail);
      if (eMail != null) {
        tokenizer.write(eMail);
      }
      final String twitterName=_owner.getProperty(User.twitterName);
      if (twitterName != null) {
        tokenizer.write(twitterName);
      }
    }
    for (    final String word : tokenizer.getWords()) {
      fulltextIndex.add(node,indexKeyName,word);
    }
    System.out.println();
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
