{
  String xpathQuery=referenceNode.getProperty(DOMElement.xpathQuery);
  if (xpathQuery != null) {
    final XPathFactory factory=XPathFactory.newInstance();
    final XPath xpath=factory.newXPath();
    Document document=((DOMNode)referenceNode).getOwnerDocument();
    try {
      Object result=xpath.evaluate(xpathQuery,document,XPathConstants.NODESET);
      List<GraphObject> results=new LinkedList<>();
      if (result instanceof NodeList) {
        NodeList nodes=(NodeList)result;
        int len=nodes.getLength();
        for (int i=0; i < len; i++) {
          Node node=nodes.item(i);
          if (node instanceof GraphObject) {
            results.add((GraphObject)node);
          }
        }
      }
 else       if (result instanceof GraphObject) {
        results.add((GraphObject)result);
      }
      return results;
    }
 catch (    Throwable t) {
      logger.log(Level.WARNING,"Unable to execute xpath query: {0}",t.getMessage());
    }
  }
  return null;
}
