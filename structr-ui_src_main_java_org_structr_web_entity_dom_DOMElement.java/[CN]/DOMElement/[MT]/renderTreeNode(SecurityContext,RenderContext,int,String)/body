{
  DataNode currentNode=renderContext.getTreeSource();
  String localDataKey=currentNode != null ? currentNode.getProperty(DOMElement.dataKey) : "";
  String treeKey=renderContext.getTreeKey();
  while (currentNode != null) {
    renderContext.setDataNode(dataKey,currentNode);
    List<AbstractRelationship> rels=getChildRelationships();
    for (    AbstractRelationship rel : rels) {
      DOMNode subNode=(DOMNode)rel.getEndNode();
      if (subNode.isNotDeleted()) {
        subNode.render(securityContext,renderContext,depth + 1);
      }
    }
    currentNode=(DataNode)currentNode.next(treeKey);
  }
  if (dataKey.equals(localDataKey)) {
    if (currentNode != null) {
      renderContext.setTreeSource((DataNode)currentNode.getFirstChild(treeKey));
    }
  }
}
