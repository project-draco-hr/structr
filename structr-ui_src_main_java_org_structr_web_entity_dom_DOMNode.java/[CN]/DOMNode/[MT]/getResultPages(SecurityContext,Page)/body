{
  HttpServletRequest request=securityContext.getRequest();
  String search=request.getParameter("search");
  if (StringUtils.isEmpty(search)) {
    return Collections.EMPTY_SET;
  }
  resultPages=(Set<Page>)request.getAttribute("searchResults");
  if ((resultPages != null) && !resultPages.isEmpty()) {
    return resultPages;
  }
  if (resultPages == null) {
    resultPages=new HashSet<>();
  }
  try {
    Result<Content> result=StructrApp.getInstance().nodeQuery(Content.class).and(Content.content,search,false).getResult();
    for (    Content content : result.getResults()) {
      resultPages.add((Page)content.getOwnerDocument());
    }
    resultPages.remove((Page)displayPage);
  }
 catch (  FrameworkException fe) {
    logger.log(Level.WARNING,"Error while searching in content",fe);
  }
  return resultPages;
}
