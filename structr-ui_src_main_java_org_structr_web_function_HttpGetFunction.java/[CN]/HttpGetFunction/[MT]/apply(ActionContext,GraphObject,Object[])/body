{
  if (sources != null && sources.length >= 1 && sources.length <= 4 && sources[0] != null) {
    try {
      String address=sources[0].toString();
      String contentType=null;
      String username=null;
      String password=null;
switch (sources.length) {
case 4:
        password=sources[3].toString();
case 3:
      username=sources[2].toString();
case 2:
    contentType=sources[1].toString();
  break;
}
if ("text/html".equals(contentType)) {
HttpClient client=getHttpClient();
GetMethod get=new GetMethod(address);
get.addRequestHeader("User-Agent","curl/7.35.0");
get.addRequestHeader("Connection","close");
get.getParams().setParameter("http.protocol.single-cookie-header",true);
get.getParams().setCookiePolicy(CookiePolicy.BROWSER_COMPATIBILITY);
get.setFollowRedirects(true);
client.executeMethod(get);
final InputStream response=get.getResponseBodyAsStream();
String code=IOUtils.toString(response,"UTF-8");
if (code.charAt(0) == 65279) {
  code=code.substring(1);
}
final Document doc=Jsoup.parse(code);
if (sources.length > 2) {
  Elements elements=doc.select(sources[2].toString());
  if (elements.size() > 1) {
    final List<String> parts=new ArrayList<>();
    for (    final Element el : elements) {
      parts.add(el.html());
    }
    return parts;
  }
 else {
    return elements.html();
  }
}
 else {
  return doc.html();
}
}
 else {
return getFromUrl(ctx,address,username,password);
}
}
 catch (Throwable t) {
logException(entity,t,sources);
}
return "";
}
 else {
logParameterError(entity,sources,ctx.isJavaScriptContext());
}
return usage(ctx.isJavaScriptContext());
}
