{
  if (attrs.isRegularFile()) {
    final String fileName=file.getFileName().toString();
    if (fileName.endsWith(".html")) {
      final String name=StringUtils.substringBeforeLast(fileName,".html");
      final App app=StructrApp.getInstance();
      final Page existingPage=getExistingPage(name);
      try (final Tx tx=app.tx()){
        if (existingPage != null) {
          deletePage(app,name);
        }
        final String src=new String(Files.readAllBytes(file),Charset.forName("UTF-8"));
        final Importer importer=new Importer(SecurityContext.getSuperUserInstance(),src,null,name,false,false);
        final boolean parseOk=importer.parse();
        if (parseOk) {
          importer.setCommentHandler(new DeploymentCommentHandler());
          final String pageId=importer.readPage().getUuid();
          logger.log(Level.INFO,"Successfully parsed page {0}: {1}",new Object[]{name,pageId});
        }
        tx.success();
      }
 catch (      FrameworkException fex) {
        logger.log(Level.WARNING,"Exception while importing page {0}: {1}",new Object[]{name,fex.getMessage()});
      }
    }
 else {
      logger.log(Level.INFO,"Ignoring non-HTML file {0}",fileName);
    }
  }
  return FileVisitResult.CONTINUE;
}
