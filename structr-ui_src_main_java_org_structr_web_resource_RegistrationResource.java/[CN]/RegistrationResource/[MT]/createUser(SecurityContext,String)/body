{
  User user=null;
  try {
    user=Services.command(securityContext,TransactionCommand.class).execute(new StructrTransaction<User>(){
      @Override public User execute() throws FrameworkException {
        return (User)Services.command(securityContext,CreateNodeCommand.class).execute(new NodeAttribute(AbstractNode.type,User.class.getSimpleName()),new NodeAttribute(User.email,emailString),new NodeAttribute(User.name,emailString),new NodeAttribute(User.confirmationKey,confKey));
      }
    }
);
  }
 catch (  FrameworkException ex) {
    Logger.getLogger(RegistrationResource.class.getName()).log(Level.SEVERE,null,ex);
  }
  return user;
}
