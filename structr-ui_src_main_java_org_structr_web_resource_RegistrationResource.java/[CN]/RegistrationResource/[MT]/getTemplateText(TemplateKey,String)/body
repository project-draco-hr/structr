{
  try {
    final Query<MailTemplate> query=StructrApp.getInstance().nodeQuery(MailTemplate.class).andName(key.name());
    if (localeString != null) {
      query.and(MailTemplate.locale,localeString);
    }
    List<MailTemplate> templates=query.getAsList();
    if (!templates.isEmpty()) {
      Content content=templates.get(0).getProperty(MailTemplate.text);
      return content != null ? content.getProperty(Content.content) : defaultValue;
    }
 else {
      return defaultValue;
    }
  }
 catch (  FrameworkException ex) {
    Logger.getLogger(RegistrationResource.class.getName()).log(Level.WARNING,"Could not get mail template for key " + key,ex);
  }
  return null;
}
