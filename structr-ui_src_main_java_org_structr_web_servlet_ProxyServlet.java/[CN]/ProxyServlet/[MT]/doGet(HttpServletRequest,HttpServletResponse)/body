{
  try {
    final ServletOutputStream out=response.getOutputStream();
    String address=request.getParameter("url");
    final URI url=URI.create(address);
    String proxyUrl=request.getParameter("proxyUrl");
    String proxyUsername=request.getParameter("proxyUsername");
    String proxyPassword=request.getParameter("proxyPassword");
    String cookie=request.getParameter("cookie");
    final String content=HttpHelper.get(address,proxyUrl,proxyUsername,proxyPassword,cookie,Collections.EMPTY_MAP).replace("<head>","<head>\n  <base href=\"" + url + "\">");
    IOUtils.write(content,out);
  }
 catch (  Throwable t) {
    logger.error("Exception while processing request",t);
    UiAuthenticator.writeInternalServerError(response);
  }
}
