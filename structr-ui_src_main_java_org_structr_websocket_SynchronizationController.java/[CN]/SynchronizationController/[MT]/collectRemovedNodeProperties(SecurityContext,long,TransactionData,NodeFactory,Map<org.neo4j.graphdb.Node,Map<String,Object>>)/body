{
  for (  PropertyEntry<org.neo4j.graphdb.Node> entry : data.removedNodeProperties()) {
    org.neo4j.graphdb.Node node=entry.entity();
    Map<String,Object> propertyMap=removedNodeProperties.get(node);
    if (propertyMap == null) {
      propertyMap=new LinkedHashMap<String,Object>();
      removedNodeProperties.put(node,propertyMap);
    }
    propertyMap.put(entry.key(),entry.previouslyCommitedValue());
    if (!data.isDeleted(node)) {
      NodeInterface modifiedNode=nodeFactory.instantiate(node,true,false);
      if (modifiedNode != null) {
        PropertyKey key=getPropertyKeyForDatabaseName(modifiedNode.getClass(),entry.key());
        propertyRemoved(securityContext,transactionKey,modifiedNode,key,entry.previouslyCommitedValue());
      }
    }
  }
}
