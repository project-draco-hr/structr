{
  final SecurityContext securityContext=getWebSocket().getSecurityContext();
  final App app=StructrApp.getInstance(securityContext);
  String id=webSocketData.getId();
  if (id != null) {
    final DOMElement node=(DOMElement)getDOMNode(id);
    try {
      DOMElement clonedNode=(DOMElement)node.cloneNode(false);
      clonedNode.setProperty(DOMElement.syncedNodes,null);
      moveChildNodes(node,clonedNode);
      ShadowDocument hiddenDoc=getOrCreateHiddenDocument();
      clonedNode.setProperty(DOMNode.ownerDocument,hiddenDoc);
      for (      DOMNode child : DOMNode.getAllChildNodes(clonedNode)) {
        child.setProperty((DOMNode.ownerDocument),hiddenDoc);
      }
      app.create(clonedNode,node,Sync.class);
    }
 catch (    FrameworkException ex) {
      getWebSocket().send(MessageBuilder.status().code(422).message(ex.getMessage()).build(),true);
    }
  }
 else {
    getWebSocket().send(MessageBuilder.status().code(422).message("Cannot append node without id").build(),true);
  }
}
