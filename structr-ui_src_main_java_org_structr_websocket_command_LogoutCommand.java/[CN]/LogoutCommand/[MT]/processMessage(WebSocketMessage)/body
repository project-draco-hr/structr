{
  final Principal user=getWebSocket().getCurrentUser();
  if (user != null) {
    try {
      Services.command(getWebSocket().getSecurityContext(),TransactionCommand.class).execute(new StructrTransaction(){
        @Override public Object execute() throws FrameworkException {
          user.setProperty(Principal.sessionId,null);
          return null;
        }
      }
);
    }
 catch (    FrameworkException fex) {
      fex.printStackTrace();
    }
    getWebSocket().setAuthenticated(null,null);
  }
}
