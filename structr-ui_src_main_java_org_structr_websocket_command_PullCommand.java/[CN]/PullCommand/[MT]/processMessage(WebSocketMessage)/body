{
  final Map<String,Object> properties=webSocketData.getNodeData();
  final String sourceId=webSocketData.getId();
  final Object recursiveSource=properties.get("recursive");
  final String username=(String)properties.get("username");
  final String password=(String)properties.get("password");
  final String host=(String)properties.get("host");
  final String key=(String)properties.get("key");
  final Long port=(Long)properties.get("port");
  if (sourceId != null && host != null && port != null && username != null && password != null && key != null) {
    final App app=StructrApp.getInstance();
    try (final Tx tx=app.tx()){
      boolean recursive=false;
      if (recursiveSource != null) {
        recursive="true".equals(recursiveSource.toString());
      }
      CloudService.doRemote(new PullTransmission(sourceId,recursive,username,password,host,port.intValue()),new WebsocketProgressListener(getWebSocket(),key));
    }
 catch (    FrameworkException fex) {
      getWebSocket().send(MessageBuilder.status().code(400).message(fex.getMessage()).build(),true);
    }
  }
 else {
    getWebSocket().send(MessageBuilder.status().code(400).message("The PULL command needs sourceId, username, password, host, port and key!").build(),true);
  }
}
