{
  Services.command(getWebSocket().getSecurityContext(),TransactionCommand.class).execute(new StructrTransaction(){
    @Override public Object execute() throws FrameworkException {
switch (action) {
case "grant":
        principal.grant(Permission.valueOf(permission),obj);
      break;
case "revoke":
    principal.revoke(Permission.valueOf(permission),obj);
  break;
}
return null;
}
}
);
}
