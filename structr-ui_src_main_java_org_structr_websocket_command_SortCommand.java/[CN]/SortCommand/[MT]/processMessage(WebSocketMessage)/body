{
  String pageId=webSocketData.getId();
  AbstractNode node=getNode(pageId);
  Map<String,Object> nodeData=webSocketData.getNodeData();
  if (node != null) {
    for (    String id : nodeData.keySet()) {
      AbstractNode nodeToSort=getNode(id);
      Long pos=Long.parseLong((String)nodeData.get(id));
      List<AbstractRelationship> rels=nodeToSort.getRelationships(RelType.CONTAINS,Direction.INCOMING);
      PropertyKey<Long> pageIdProperty=new LongProperty(pageId);
      for (      AbstractRelationship rel : rels) {
        try {
          Long oldPos=rel.getLongProperty(pageIdProperty);
          if ((oldPos != null) && !(oldPos.equals(pos))) {
            rel.setProperty(pageIdProperty,pos);
          }
        }
 catch (        FrameworkException fex) {
          fex.printStackTrace();
        }
      }
    }
  }
 else {
    logger.log(Level.WARNING,"Node with uuid {0} not found.",webSocketData.getId());
    getWebSocket().send(MessageBuilder.status().code(404).build(),true);
  }
}
