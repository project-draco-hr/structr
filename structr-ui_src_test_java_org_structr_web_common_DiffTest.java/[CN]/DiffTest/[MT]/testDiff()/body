{
  try (final Tx tx=app.tx()){
    final Page sourcePage=createTestPage();
    final String sourceHtml=renderPage(sourcePage);
    final String modifiedHtml=modifyHtml(sourceHtml);
    System.out.println("###############################################################################################");
    System.out.println("Original HTML:");
    System.out.println(sourceHtml);
    System.out.println("#############################");
    print(sourcePage,0,0);
    System.out.println("###############################################################################################");
    System.out.println("Modified HTML:");
    System.out.println(modifiedHtml);
    final Page modifiedPage=parsePage(modifiedHtml);
    System.out.println("#############################");
    print(modifiedPage,0,0);
    final List<InvertibleModificationOperation> changeSet=diff(sourcePage,modifiedPage);
    System.out.println("Changes:");
    for (    final InvertibleModificationOperation op : changeSet) {
      System.out.println(op.toString());
      op.apply(app,sourcePage);
    }
    final String updatedHtml=renderPage(sourcePage);
    System.out.println("###############################################################################################");
    System.out.println("Updated HTML:");
    System.out.println(updatedHtml);
    System.out.println("#############################");
    print(sourcePage,0,0);
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
