{
  FTPClient ftp=new FTPClient();
  try {
    ftp.connect("localhost",8821);
    logger.log(Level.INFO,"Reply from FTP server:",ftp.getReplyString());
    int reply=ftp.getReplyCode();
    assertTrue(FTPReply.isPositiveCompletion(reply));
    String username="ftpuser1";
    String password="ftpuserpw1";
    ftpUser=createFTPUser(username,password);
    boolean loginSuccess=ftp.login(username,password);
    logger.log(Level.INFO,"Try to login as " + username + "/"+ password+ ": ",loginSuccess);
    assertTrue(loginSuccess);
    reply=ftp.getReplyCode();
    assertEquals(FTPReply.USER_LOGGED_IN,reply);
  }
 catch (  IOException|FrameworkException ex) {
    logger.log(Level.SEVERE,"Error in FTP test",ex);
    fail("Unexpected exception: " + ex.getMessage());
  }
  return ftp;
}
