{
  try {
    TestImage img=transactionCommand.execute(new StructrTransaction<TestImage>(){
      @Override public TestImage execute() throws FrameworkException {
        try {
          return (TestImage)ImageHelper.createImageBase64(securityContext,base64Image,TestImage.class);
        }
 catch (        IOException ex) {
          logger.log(Level.SEVERE,null,ex);
        }
        return null;
      }
    }
);
    assertNotNull(img);
    assertTrue(img instanceof TestImage);
    Image tn=img.getProperty(TestImage.thumbnail);
    assertNotNull(tn);
    assertEquals(new Integer(200),tn.getWidth());
    assertEquals(new Integer(48),tn.getHeight());
    assertEquals("image/" + Thumbnail.FORMAT,tn.getContentType());
  }
 catch (  FrameworkException ex) {
    logger.log(Level.SEVERE,ex.toString());
    fail("Unexpected exception");
  }
}
