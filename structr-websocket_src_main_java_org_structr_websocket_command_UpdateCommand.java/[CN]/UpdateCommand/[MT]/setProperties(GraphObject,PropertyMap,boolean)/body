{
  for (  Entry<PropertyKey,Object> entry : properties.entrySet()) {
    PropertyKey key=entry.getKey();
    Object value=entry.getValue();
    obj.setProperty(key,value);
    if (rec) {
      if (obj instanceof AbstractNode) {
        AbstractNode node=(AbstractNode)obj;
        for (        AbstractRelationship rel : node.getOutgoingRelationships(RelType.CONTAINS)) {
          AbstractNode endNode=rel.getEndNode();
          if (endNode != null) {
            setProperties(endNode,properties,rec);
          }
        }
      }
    }
  }
}
