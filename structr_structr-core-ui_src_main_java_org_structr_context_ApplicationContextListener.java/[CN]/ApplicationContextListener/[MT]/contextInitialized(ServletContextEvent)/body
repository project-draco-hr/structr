{
  logger.log(Level.INFO,"Servlet context created");
  Map<String,Object> context=new ConcurrentHashMap<String,Object>();
  ServletContext servletContext=sce.getServletContext();
  String configFile=servletContext.getInitParameter(Services.CONFIG_FILE_PATH);
  context.put(Services.CONFIG_FILE_PATH,configFile);
  context.put(Services.SERVLET_CONTEXT,servletContext);
  try {
    Properties properties=new Properties();
    properties.load(new FileInputStream(configFile));
    String appTitle=properties.getProperty(Services.APPLICATION_TITLE);
    logger.log(Level.INFO,"Config file: Application title: {0}",appTitle);
    String tmpPath=properties.getProperty(Services.TMP_PATH_IDENTIFIER);
    logger.log(Level.INFO,"Config file: Temp path: {0}",tmpPath);
    String databasePath=properties.getProperty(Services.DATABASE_PATH_IDENTIFIER);
    logger.log(Level.INFO,"Config file: Database path: {0}",databasePath);
    String filesPath=properties.getProperty(Services.FILES_PATH_IDENTIFIER);
    logger.log(Level.INFO,"Config file: Files path: {0}",filesPath);
    String modulesPath=properties.getProperty(Services.MODULES_PATH_IDENTIFIER);
    logger.log(Level.INFO,"Config file: Plugins path: {0}",modulesPath);
    String entityPackages=properties.getProperty(Services.ENTITY_PACKAGES_IDENTIFIER);
    logger.log(Level.INFO,"Config file: Entity Packages: {0}",entityPackages);
    if (appTitle != null) {
      context.put(Services.APPLICATION_TITLE,appTitle);
    }
 else {
      context.put(Services.APPLICATION_TITLE,servletContext.getInitParameter(Services.APPLICATION_TITLE));
    }
    if (tmpPath != null) {
      context.put(Services.TMP_PATH_IDENTIFIER,tmpPath);
    }
 else {
      context.put(Services.TMP_PATH_IDENTIFIER,servletContext.getInitParameter(Services.TMP_PATH_IDENTIFIER));
    }
    if (databasePath != null) {
      context.put(Services.DATABASE_PATH_IDENTIFIER,databasePath);
    }
 else {
      context.put(Services.DATABASE_PATH_IDENTIFIER,servletContext.getInitParameter(Services.DATABASE_PATH_IDENTIFIER));
    }
    if (filesPath != null) {
      context.put(Services.FILES_PATH_IDENTIFIER,filesPath);
    }
 else {
      context.put(Services.FILES_PATH_IDENTIFIER,servletContext.getInitParameter(Services.FILES_PATH_IDENTIFIER));
    }
    if (modulesPath != null) {
      context.put(Services.MODULES_PATH_IDENTIFIER,modulesPath);
    }
 else {
      context.put(Services.MODULES_PATH_IDENTIFIER,servletContext.getInitParameter(Services.MODULES_PATH_IDENTIFIER));
    }
    if (entityPackages != null) {
      context.put(Services.ENTITY_PACKAGES_IDENTIFIER,entityPackages);
    }
 else {
      context.put(Services.ENTITY_PACKAGES_IDENTIFIER,servletContext.getInitParameter(Services.ENTITY_PACKAGES_IDENTIFIER));
    }
  }
 catch (  Throwable t) {
    logger.log(Level.WARNING,"Could not inititialize all values");
  }
  context.put(Services.STRUCTR_PAGE_PREDICATE,new Predicate<Class>(){
    @Override public boolean evaluate(    Class obj){
      return (StructrPage.class.isAssignableFrom(obj));
    }
  }
);
  Services.setContext(context);
}
