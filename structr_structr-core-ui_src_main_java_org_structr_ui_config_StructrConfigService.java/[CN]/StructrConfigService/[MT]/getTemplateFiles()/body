{
  List fileList=new ArrayList();
  Set resources=servletContext.getResourcePaths("/");
  if (onGoogleAppEngine) {
    Set tempResources=new HashSet();
    tempResources.addAll(servletContext.getResourcePaths("/page"));
    tempResources.addAll(servletContext.getResourcePaths("/pages"));
    tempResources.addAll(resources);
    resources=Collections.unmodifiableSet(tempResources);
  }
  for (Iterator i=resources.iterator(); i.hasNext(); ) {
    String resource=(String)i.next();
    if (isTemplate(resource)) {
      fileList.add(resource);
    }
 else     if (resource.endsWith("/")) {
      if (!resource.equalsIgnoreCase("/WEB-INF/")) {
        processDirectory(resource,fileList);
      }
    }
  }
  Collections.sort(fileList);
  return fileList;
}
