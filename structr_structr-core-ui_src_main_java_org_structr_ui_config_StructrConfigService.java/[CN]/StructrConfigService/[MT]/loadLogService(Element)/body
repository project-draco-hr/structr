{
  Element logServiceElm=ClickUtils.getChild(rootElm,"log-service");
  if (logServiceElm != null) {
    Class logServiceClass=ConsoleLogService.class;
    String classname=logServiceElm.getAttribute("classname");
    if (StringUtils.isNotBlank(classname)) {
      logServiceClass=ClickUtils.classForName(classname);
    }
    logService=(LogService)logServiceClass.newInstance();
    Map propertyMap=loadPropertyMap(logServiceElm);
    for (Iterator i=propertyMap.keySet().iterator(); i.hasNext(); ) {
      String name=i.next().toString();
      String value=propertyMap.get(name).toString();
      Ognl.setValue(name,logService,value);
    }
  }
 else {
    logService=new ConsoleLogService();
  }
  logService.onInit(getServletContext());
}
