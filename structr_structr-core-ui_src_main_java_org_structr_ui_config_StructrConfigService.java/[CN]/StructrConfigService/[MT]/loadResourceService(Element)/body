{
  Element resourceServiceElm=ClickUtils.getChild(rootElm,"resource-service");
  if (resourceServiceElm != null) {
    Class resourceServiceClass=ClickResourceService.class;
    String classname=resourceServiceElm.getAttribute("classname");
    if (StringUtils.isNotBlank(classname)) {
      resourceServiceClass=ClickUtils.classForName(classname);
    }
    resourceService=(ResourceService)resourceServiceClass.newInstance();
    Map propertyMap=loadPropertyMap(resourceServiceElm);
    for (Iterator i=propertyMap.keySet().iterator(); i.hasNext(); ) {
      String name=i.next().toString();
      String value=propertyMap.get(name).toString();
      Ognl.setValue(name,resourceService,value);
    }
  }
 else {
    resourceService=new ClickResourceService();
  }
  if (getLogService().isDebugEnabled()) {
    String msg="initializing ResourceService: " + resourceService.getClass().getName();
    getLogService().debug(msg);
  }
  resourceService.onInit(servletContext);
}
