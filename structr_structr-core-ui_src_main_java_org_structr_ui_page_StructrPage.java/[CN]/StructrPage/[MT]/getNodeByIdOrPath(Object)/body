{
  if (nodeId != null) {
    if (nodeId instanceof String) {
      String nodeIdString=(String)nodeId;
      try {
        if (nodeIdString.startsWith("/")) {
          AbstractNode byPathNode=TreeHelper.getNodeByPath(getRootNode(),nodeIdString,true,user);
          if (byPathNode != null) {
            return byPathNode;
          }
          String byNumber=StringUtils.remove(nodeIdString,"/");
          AbstractNode byNumberNode=getNodeById(Long.parseLong(byNumber));
          if (byNumberNode != null) {
            return byNumberNode;
          }
        }
        return getNodeById(Long.parseLong((String)nodeId));
      }
 catch (      Exception e) {
        logger.log(Level.SEVERE,"Could not handle nodeId {0}",nodeId);
        return null;
      }
    }
 else     if (nodeId instanceof Long) {
      return getNodeById((Long)nodeId);
    }
 else {
      logger.log(Level.SEVERE,"Node requested by unknown object: {0}",nodeId);
      return null;
    }
  }
 else {
    return null;
  }
}
