{
  super.onInit();
  if (user != null) {
    sessionId=(Long)getContext().getRequest().getSession().getAttribute(SessionMonitor.SESSION_ID);
    long t0=System.currentTimeMillis();
    SessionMonitor.logPageRequest(user,sessionId,"Page Request",getContext().getRequest());
    long t1=System.currentTimeMillis();
    System.out.println("SessionMonitor.logPageRequest: " + (t1 - t0) + " ms");
  }
  node=getNodeByIdOrPath(nodeId);
  if (isSuperUser) {
    readAllowed=true;
    showTreeAllowed=true;
    writeAllowed=true;
    accessControlAllowed=true;
    createNodeAllowed=true;
    deleteNodeAllowed=true;
    editPropertiesAllowed=true;
    editVisibilityAllowed=true;
    addRelationshipAllowed=true;
    removeRelationshipAllowed=true;
  }
 else   if (user != null && node != null) {
    readAllowed=node.readAllowed(user);
    showTreeAllowed=node.showTreeAllowed(user);
    writeAllowed=node.writeAllowed(user);
    accessControlAllowed=node.accessControlAllowed(user);
    createNodeAllowed=node.createSubnodeAllowed(user);
    deleteNodeAllowed=node.deleteNodeAllowed(user);
    editPropertiesAllowed=node.editPropertiesAllowed(user);
    editVisibilityAllowed=node.editPropertiesAllowed(user);
    addRelationshipAllowed=node.addRelationshipAllowed(user);
    removeRelationshipAllowed=node.removeRelationshipAllowed(user);
  }
}
