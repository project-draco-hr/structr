{
  super.onRender();
  externalViewUrl=node.getNodeURL(user,contextPath);
  localViewUrl=getContext().getRequest().getContextPath().concat("/view".concat(node.getNodePath(user).replace("&","%26")));
  if (!(node instanceof Image)) {
    StringBuilder out=new StringBuilder();
    node.renderView(out,node,null,null,user);
    rendition=out.toString();
    source=ClickUtils.escapeHtml(rendition);
  }
 else {
    source="Cannot show source of Image";
  }
}
