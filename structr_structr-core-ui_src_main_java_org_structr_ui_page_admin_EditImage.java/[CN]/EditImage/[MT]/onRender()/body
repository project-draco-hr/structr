{
  super.onRender();
  Image previewImage;
  if (image.isThumbnail() || (image.getWidth() <= PREVIEW_WIDTH && image.getHeight() <= PREVIEW_HEIGHT)) {
    previewImage=image;
  }
 else {
    previewImage=image.getScaledImage(PREVIEW_WIDTH,PREVIEW_HEIGHT);
  }
  if (previewImage != null) {
    externalPreviewViewUrl="/view/" + previewImage.getId();
    localPreviewViewUrl=contextPath + "/view/" + previewImage.getId();
  }
}
