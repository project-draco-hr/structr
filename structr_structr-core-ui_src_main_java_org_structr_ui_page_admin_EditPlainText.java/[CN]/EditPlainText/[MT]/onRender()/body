{
  super.onRender();
  StructrNode s=getNodeByIdOrPath(getNodeId());
  if (editPropertiesForm.isValid()) {
    editPropertiesForm.copyFrom(s);
  }
  String contentType=s.getContentType();
  if (contentType != null && contentType.indexOf('/') > 0) {
    textType=contentType.split("/")[1];
  }
  if (editContentForm.isValid()) {
    editContentForm.copyFrom(s);
  }
  if (editPropertiesForm.isValid()) {
    editPropertiesForm.add(new HiddenField(NODE_ID_KEY,nodeId != null ? nodeId : ""));
    editPropertiesForm.add(new HiddenField(RENDER_MODE_KEY,renderMode != null ? renderMode : ""));
  }
  if (editContentForm.isValid()) {
    editContentForm.add(new HiddenField(NODE_ID_KEY,nodeId != null ? nodeId : ""));
    editContentForm.add(new HiddenField(RENDER_MODE_KEY,renderMode != null ? renderMode : ""));
  }
}
