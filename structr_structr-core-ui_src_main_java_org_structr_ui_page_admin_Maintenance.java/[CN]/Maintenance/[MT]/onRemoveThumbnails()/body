{
  Long numberOfRemovedThumbnails=(Long)Services.command(TransactionCommand.class).execute(new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      Long numberOfThumbnails=0L;
      List<Image> images=new LinkedList<Image>();
      for (      AbstractNode s : getAllNodes()) {
        if (s instanceof Image) {
          images.add((Image)s);
        }
      }
      Command deleteNode=Services.command(DeleteNodeCommand.class);
      Command deleteRel=Services.command(DeleteRelationshipCommand.class);
      for (      Image image : images) {
        List<StructrRelationship> rels=(List<StructrRelationship>)image.getThumbnailRelationships();
        for (        StructrRelationship r : rels) {
          AbstractNode t=r.getEndNode();
          deleteRel.execute(r);
          deleteNode.execute(t,new SuperUser());
          numberOfThumbnails++;
        }
      }
      return numberOfThumbnails;
    }
  }
);
  okMsg=numberOfRemovedThumbnails + " thumbnails successfully removed.";
  return false;
}
