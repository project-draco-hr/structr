{
  tempTransform.translate(centroid.getX(),centroid.getY());
  double rotation=textStyle.getRotation();
  if (Double.isNaN(rotation) || Double.isInfinite(rotation)) {
    rotation=0.0;
  }
  tempTransform.rotate(rotation);
  Rectangle2D textBounds=painter.getLabelBounds();
  double displacementX=(textStyle.getAnchorX() * (-textBounds.getWidth())) + textStyle.getDisplacementX();
  double displacementY=(textStyle.getAnchorY() * (textBounds.getHeight())) - textStyle.getDisplacementY() - textBounds.getHeight() + painter.getLineHeight();
  tempTransform.translate(displacementX,displacementY);
}
