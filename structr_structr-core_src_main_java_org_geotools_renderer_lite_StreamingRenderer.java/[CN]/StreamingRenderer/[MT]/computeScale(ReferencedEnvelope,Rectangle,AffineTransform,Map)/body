{
  if (getScaleComputationMethod().equals(SCALE_ACCURATE)) {
    try {
      return RendererUtilities.calculateScale(envelope,paintArea.width,paintArea.height,hints);
    }
 catch (    Exception e) {
      LOGGER.log(Level.WARNING,e.getLocalizedMessage(),e);
    }
  }
  if (XAffineTransform.getRotation(worldToScreen) != 0.0) {
    return RendererUtilities.calculateOGCScaleAffine(envelope.getCoordinateReferenceSystem(),worldToScreen,hints);
  }
  return RendererUtilities.calculateOGCScale(envelope,paintArea.width,hints);
}
