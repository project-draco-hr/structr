{
  CoordinateReferenceSystem rCS=null;
  try {
    rCS=features.getSchema().getGeometryDescriptor().getType().getCoordinateReferenceSystem();
  }
 catch (  NullPointerException e) {
  }
  if (rCS != sourceCrs) {
    if (sourceCrs != null) {
      if ((rCS == null) || !CRS.equalsIgnoreMetadata(rCS,sourceCrs)) {
        try {
          if (features instanceof SimpleFeatureCollection) {
            return new ForceCoordinateSystemFeatureResults((SimpleFeatureCollection)features,sourceCrs);
          }
        }
 catch (        Exception ee) {
          LOGGER.log(Level.WARNING,ee.getLocalizedMessage(),ee);
        }
      }
    }
  }
  return features;
}
