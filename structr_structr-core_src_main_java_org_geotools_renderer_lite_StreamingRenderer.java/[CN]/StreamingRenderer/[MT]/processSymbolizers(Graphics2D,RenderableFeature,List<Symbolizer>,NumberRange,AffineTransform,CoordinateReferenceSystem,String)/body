{
  for (  Symbolizer symbolizer : symbolizers) {
    if (symbolizer instanceof RasterSymbolizer) {
      requests.put(new RenderRasterRequest(graphics,drawMe.content,(RasterSymbolizer)symbolizer,destinationCrs,at));
    }
 else {
      MetaDataShape shape=drawMe.getShape(symbolizer,at);
      if (shape == null) {
        continue;
      }
      Map<String,Object> metadata=new HashMap<String,Object>();
      Feature feature=(Feature)drawMe.content;
      for (      Property p : feature.getProperties()) {
        String key=p.getName().getLocalPart().toLowerCase();
        if (!("the_geom".equals(key))) {
          metadata.put(key,p.getValue());
        }
      }
      shape.setCustomMetadata(metadata);
      if (symbolizer instanceof TextSymbolizer && drawMe.content instanceof Feature) {
        labelCache.put(layerId,(TextSymbolizer)symbolizer,(Feature)drawMe.content,shape,scaleRange);
      }
 else {
        Style2D style=styleFactory.createStyle(drawMe.content,symbolizer,scaleRange);
        double size=RendererUtilities.getStyle2DSize(style) + 10;
        Envelope env=new Envelope(screenSize.getMinX(),screenSize.getMaxX(),screenSize.getMinY(),screenSize.getMaxY());
        env.expandBy(size);
        final GeometryClipper clipper=new GeometryClipper(env);
        Geometry g=clipper.clip(shape.getGeometry(),false);
        if (g == null) {
          continue;
        }
        if (g != shape.getGeometry()) {
          shape=new MetaDataShape(g,null,null,false);
          shape.setCustomMetadata(metadata);
        }
        requests.put(new PaintShapeRequest(graphics,shape,style,scaleDenominator));
      }
    }
  }
  fireFeatureRenderedEvent(drawMe.content);
}
