{
  if (request != null) {
    String searchString=Search.clean(request.getParameter("search"));
    String searchInTitle=request.getParameter("searchInTitle");
    boolean inTitle=(StringUtils.isNotEmpty(searchInTitle) && Boolean.parseBoolean(searchInTitle)) ? true : false;
    String searchInContent=request.getParameter("searchInContent");
    boolean inContent=(StringUtils.isNotEmpty(searchInContent) && Boolean.parseBoolean(searchInContent)) ? true : false;
    if ((searchString != null) && !(searchString.isEmpty())) {
      List<SearchAttribute> searchAttrs=new LinkedList<SearchAttribute>();
      searchAttrs.add(Search.orName(searchString));
      if (inTitle) {
        searchAttrs.add(Search.orTitle(searchString));
      }
      if (inContent) {
        searchAttrs.add(Search.orContent(searchString));
      }
      Command search=Services.command(securityContext,SearchNodeCommand.class);
      List<AbstractNode> result=(List<AbstractNode>)search.execute(securityContext,null,false,true,searchAttrs);
      return result;
    }
  }
  return null;
}
