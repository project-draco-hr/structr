{
  if (node == null) {
    return false;
  }
  if (node.isHidden()) {
    return false;
  }
  boolean visibleByTime=false;
  Date visStartDate=node.getVisibilityStartDate();
  long effectiveStartDate=0L;
  Date createdDate=node.getCreatedDate();
  if (createdDate != null) {
    effectiveStartDate=Math.max(createdDate.getTime(),0L);
  }
  visStartDate=((visStartDate == null) ? new Date(effectiveStartDate) : visStartDate);
  Date visEndDate=node.getVisibilityEndDate();
  visEndDate=((visEndDate == null) ? new Date(Long.MAX_VALUE) : visEndDate);
  Date now=new Date();
  visibleByTime=(now.after(visStartDate) && now.before(visEndDate));
  if (node.isVisibleToPublicUsers()) {
    return visibleByTime;
  }
  if (node.isVisibleToAuthenticatedUsers()) {
    user=getUser();
    if (user != null) {
      if (user instanceof SuperUser) {
        return true;
      }
      if (user.isFrontendUser()) {
        boolean hasReadPermission=node.hasPermission(AbstractRelationship.Permission.read.name(),user);
        if (!hasReadPermission) {
          response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
        }
        return hasReadPermission;
      }
    }
  }
  return false;
}
