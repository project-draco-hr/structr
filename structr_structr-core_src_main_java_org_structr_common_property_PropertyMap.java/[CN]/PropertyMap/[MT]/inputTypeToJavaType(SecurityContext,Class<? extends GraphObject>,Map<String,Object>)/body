{
  PropertyMap resultMap=new PropertyMap();
  if (source != null) {
    for (    Entry<String,Object> entry : source.entrySet()) {
      String key=entry.getKey();
      Object value=entry.getValue();
      if (key != null) {
        PropertyKey propertyKey=EntityContext.getPropertyKeyForName(entity,key);
        PropertyConverter converter=propertyKey.inputConverter(securityContext);
        if (converter != null) {
          try {
            Object propertyValue=converter.convert(value);
            resultMap.put(propertyKey,propertyValue);
          }
 catch (          ClassCastException cce) {
            cce.printStackTrace();
            throw new FrameworkException(entity.getSimpleName(),new TypeToken(propertyKey,"XXX"));
          }
        }
 else {
          resultMap.put(propertyKey,value);
        }
      }
    }
  }
  return resultMap;
}
