{
  SecurityContext securityContext=securityContextMap.get(Thread.currentThread());
  for (  Relationship rel : data.createdRelationships()) {
    String startNodeType=(String)rel.getStartNode().getProperty(AbstractNode.Key.type.name());
    String endNodeType=(String)rel.getEndNode().getProperty(AbstractNode.Key.type.name());
    Set<Transformation<StructrRelationship>> transformations=EntityContext.getRelationshipCreationTransformations(rel.getType(),startNodeType,endNodeType);
    if (transformations != null) {
      for (      Transformation<StructrRelationship> transformation : transformations) {
        StructrRelationship structrRelationship=new StructrRelationship(securityContext,rel);
        try {
          transformation.apply(securityContext,structrRelationship);
        }
 catch (        FrameworkException fex) {
          logger.log(Level.WARNING,"Unable to execute relationship creation transformation",fex);
        }
      }
    }
  }
}
