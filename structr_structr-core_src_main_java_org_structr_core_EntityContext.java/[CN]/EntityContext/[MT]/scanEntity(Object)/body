{
  List<PropertyKey> properties=getFieldsOfType(PropertyKey.class,entity);
  List<View> views=getFieldsOfType(View.class,entity);
  Class type=entity.getClass();
  Map<String,PropertyKey> classPropertyMap=getClassPropertyMapForType(type);
  for (  PropertyKey key : properties) {
    classPropertyMap.put(key.name(),key);
  }
  registerPropertySet(type,PropertyView.All,properties.toArray(new PropertyKey[0]));
  for (  View view : views) {
    registerPropertySet(type,view.name(),view.properties());
  }
}
