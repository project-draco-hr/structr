{
  int count=0;
  if (currentObject != null && value != null) {
    Object val=value.get(securityContext);
    if (val != null && val instanceof PropertyKey) {
      Object toCount=currentObject.getProperty((PropertyKey)val);
      if (toCount != null) {
        if (toCount instanceof Collection) {
          count=((Collection)toCount).size();
        }
 else         if (toCount instanceof IterableAdapter && ((IterableAdapter)toCount).size() >= 0) {
          return ((IterableAdapter)toCount).size();
        }
 else         if (toCount instanceof Iterable) {
          for (          Object o : ((Iterable)toCount)) {
            count++;
          }
        }
 else {
          count=1;
        }
      }
    }
 else {
      logger.log(Level.WARNING,"PasswordConverter for type {0} called with invalid parameter {1}",new Object[]{currentObject.getType(),val != null ? val : "null"});
    }
  }
  return count;
}
