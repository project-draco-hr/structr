{
  Object val=value.get(securityContext);
  if (val instanceof ThumbnailParameters) {
    ThumbnailParameters params=(ThumbnailParameters)val;
    Image thumbnail=((Image)currentObject).getScaledImage(params.getMaxWidth(),params.getMaxHeight(),params.getCropToFit());
    if (thumbnail == null) {
      logger.log(Level.WARNING,"Could not create thumbnail for {0}",source);
      return null;
    }
    return thumbnail;
  }
  return source;
}
