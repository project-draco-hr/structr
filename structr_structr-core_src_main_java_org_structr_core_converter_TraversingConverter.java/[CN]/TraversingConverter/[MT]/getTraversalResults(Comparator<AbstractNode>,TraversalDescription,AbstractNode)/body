{
  Iterable<Node> nodes=traversalDescription.traverse(node.getNode()).nodes();
  NodeFactory nodeFactory=new NodeFactory<AbstractNode>(securityContext);
  List<AbstractNode> nodeList=new LinkedList<AbstractNode>();
  for (  Node n : nodes) {
    String type=n.hasProperty(AbstractNode.Key.type.name()) ? (String)n.getProperty(AbstractNode.Key.type.name()) : "GenericNode";
    nodeList.add(nodeFactory.createNode(securityContext,n,type));
  }
  if (comparator != null) {
    Collections.sort(nodeList,comparator);
  }
  return nodeList;
}
