{
  isDirty=false;
  Command transactionCommand=Services.command(securityContext,TransactionCommand.class);
  transactionCommand.execute(new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      Command createNode=Services.command(securityContext,CreateNodeCommand.class);
      AbstractNode s=(AbstractNode)createNode.execute(user);
      init(securityContext,s);
      Set<String> keys=properties.keySet();
      for (      String key : keys) {
        Object value=properties.get(key);
        if ((key != null) && (value != null)) {
          setProperty(key,value,false);
        }
      }
      return null;
    }
  }
);
}
