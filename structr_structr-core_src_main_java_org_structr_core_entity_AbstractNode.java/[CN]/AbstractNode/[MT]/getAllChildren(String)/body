{
  try {
    List<AbstractNode> nodes=new LinkedList<AbstractNode>();
    Command findNode=Services.command(securityContext,FindNodeCommand.class);
    List<AbstractNode> result=(List<AbstractNode>)findNode.execute(this);
    for (    AbstractNode s : result) {
      if (securityContext.isAllowed(s,Permission.Read) && ((nodeType == null) || nodeType.equals(s.getType()))) {
        nodes.add(s);
      }
    }
    return nodes;
  }
 catch (  FrameworkException fex) {
    logger.log(Level.WARNING,"Unable to get all child nodes",fex);
  }
  return null;
}
