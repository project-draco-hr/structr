{
  Class type=this.getClass();
  Object value=null;
  String singularType=(key.endsWith("ies") ? key.substring(0,key.length() - 3).concat("y") : (key.endsWith("s") ? key.substring(0,key.length() - 1) : key));
  if (EntityContext.getRelations(type).containsKey(singularType)) {
    DirectedRelationship rel=EntityContext.getRelations(type).get(singularType);
    if (rel != null) {
      return getTraversalResults(rel.getRelType(),rel.getDirection(),StringUtils.capitalize(singularType));
    }
  }
  if (isDirty) {
    value=properties.get(key);
  }
  if (key.equals(Key.visibleToPublicUsers.name()) && (dbNode.hasProperty("public") || dbNode.hasProperty("isPublic"))) {
    final Object oldValue=dbNode.hasProperty("public") ? dbNode.getProperty("public") : dbNode.getProperty("isPublic");
    StructrTransaction transaction=new StructrTransaction(){
      @Override public Object execute() throws Throwable {
        dbNode.setProperty(Key.visibleToPublicUsers.name(),oldValue);
        if (dbNode.hasProperty("public")) {
          dbNode.removeProperty("public");
        }
        if (dbNode.hasProperty("isPublic")) {
          dbNode.removeProperty("isPublic");
        }
        return null;
      }
    }
;
    Services.command(securityContext,TransactionCommand.class).execute(transaction);
    if (transaction.getCause() != null) {
      logger.log(Level.WARNING,"Error while setting property",transaction.getCause());
    }
  }
  if ((key != null) && dbNode.hasProperty(key)) {
    value=dbNode.getProperty(key);
  }
  PropertyConverter converter=EntityContext.getPropertyConverter(securityContext,type,key);
  if (converter != null) {
    Value conversionValue=EntityContext.getPropertyConversionParameter(type,key);
    value=converter.convertForGetter(value,conversionValue);
  }
  return value;
}
