{
  if (!renderersInitialized) {
    initializeRenderers(rendererMap);
    renderersInitialized=true;
  }
  RenderMode renderMode=RenderMode.Default;
  if (this.equals(startNode) && this.hasDirect()) {
    renderMode=RenderMode.Direct;
  }
  if (editNodeId != null && getId() == editNodeId.longValue()) {
    renderMode=RenderMode.Edit;
  }
  NodeRenderer ret=rendererMap.get(renderMode);
  if (ret == null) {
    logger.log(Level.INFO,"No renderer found for mode {0}, using default renderers",renderMode);
switch (renderMode) {
case Default:
      ret=new DefaultRenderer();
    break;
case Direct:
  break;
case Edit:
ret=new DefaultEditRenderer();
break;
}
}
logger.log(Level.INFO,"Got renderer {0} for node type {1} ({2})",new Object[]{ret != null ? ret.getClass().getName() : "Unknown",this.getType(),this.getId()});
if (ret != null) {
ret.renderNode(out,this,startNode,editUrl,editNodeId,renderMode);
}
 else {
logger.log(Level.WARNING,"No renderer for mode {0}, node {1}",new Object[]{renderMode,this.getId()});
}
}
