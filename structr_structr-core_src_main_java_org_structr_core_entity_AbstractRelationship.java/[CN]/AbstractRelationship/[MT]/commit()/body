{
  isDirty=false;
  Command transactionCommand=Services.command(securityContext,TransactionCommand.class);
  transactionCommand.execute(new StructrTransaction(){
    @Override public Object execute() throws FrameworkException {
      Command createRel=Services.command(securityContext,CreateRelationshipCommand.class);
      AbstractRelationship rel=(AbstractRelationship)createRel.execute();
      init(securityContext,rel.getRelationship());
      Set<String> keys=properties.keySet();
      for (      String key : keys) {
        Object value=properties.get(key);
        if ((key != null) && (value != null)) {
          setProperty(key,value);
        }
      }
      return null;
    }
  }
);
}
