{
  if (key == null || key.name() == null) {
    return null;
  }
  Object value=applyConverter ? cachedConvertedProperties.get(key) : cachedRawProperties.get(key);
  boolean dontCache=false;
  Class type=this.getClass();
  if (value == null || !applyConverter) {
    PropertyKey startNodeIdKey=getStartNodeIdKey();
    PropertyKey endNodeIdKey=getEndNodeIdKey();
    if (startNodeIdKey != null && key.equals(startNodeIdKey)) {
      value=getStartNodeId();
      if (applyConverter) {
        cachedConvertedProperties.put(key,value);
      }
 else {
        cachedRawProperties.put(key,value);
      }
      return (T)value;
    }
    if (endNodeIdKey != null && key.equals(endNodeIdKey)) {
      value=getEndNodeId();
      if (applyConverter) {
        cachedConvertedProperties.put(key,value);
      }
 else {
        cachedRawProperties.put(key,value);
      }
      return (T)value;
    }
    PropertyGroup propertyGroup=EntityContext.getPropertyGroup(type,key);
    if (propertyGroup != null) {
      return (T)propertyGroup.getGroupedProperties(this);
    }
    if (dbRelationship.hasProperty(key.name())) {
      value=dbRelationship.getProperty(key.name());
    }
    if (value == null) {
      value=key.defaultValue();
      dontCache=true;
    }
    if (applyConverter) {
      PropertyConverter converter=key.databaseConverter(securityContext);
      if (converter != null) {
        converter.setCurrentObject(this);
        try {
          value=converter.convertForGetter(value);
        }
 catch (        FrameworkException fex) {
          logger.log(Level.WARNING,"Unable to convert property {0} of type {1}: {2}",new Object[]{key.name(),getClass().getSimpleName(),fex.getMessage()});
        }
      }
    }
    if (!dontCache) {
      if (applyConverter) {
        cachedConvertedProperties.put(key,value);
      }
 else {
        cachedRawProperties.put(key,value);
      }
    }
  }
  return (T)value;
}
