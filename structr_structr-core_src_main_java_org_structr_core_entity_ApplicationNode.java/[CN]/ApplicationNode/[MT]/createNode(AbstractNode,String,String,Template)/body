{
  Command createNodeCommand=Services.command(securityContext,CreateNodeCommand.class);
  List<NodeAttribute> attrs=new LinkedList<NodeAttribute>();
  attrs.add(new NodeAttribute(Key.type.name(),nodeType));
  attrs.add(new NodeAttribute(Key.name.name(),name));
  AbstractNode ret=(AbstractNode)createNodeCommand.execute(attrs);
  if (parent != null) {
    linkNodes(parent,ret,RelType.HAS_CHILD);
  }
  if (template != null) {
    linkNodes(ret,template,RelType.USE_TEMPLATE);
  }
  return (ret);
}
