{
  Class namedRelationType=getEntityClass();
  List<GraphObject> typeFilteredResults=new LinkedList<GraphObject>();
  if (!(obj instanceof AbstractNode)) {
    logger.log(Level.SEVERE,"Requested relationships of a non-node object");
    throw new FrameworkException(HttpServletResponse.SC_BAD_REQUEST,new ErrorBuffer());
  }
  AbstractNode node=(AbstractNode)obj;
  for (  AbstractRelationship rel : node.getRelationships(relType,getDirectionForType(obj.getStringProperty(AbstractNode.Key.type.name())))) {
    if (rel.getClass().equals(namedRelationType)) {
      typeFilteredResults.add(rel);
    }
  }
  return typeFilteredResults;
}
