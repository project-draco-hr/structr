{
  final int size=this.size();
  if (index < 0 || index > size) {
    throw new ArrayIndexOutOfBoundsException();
  }
  transaction.execute(new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      for (      Decorator<AbstractNode> decorator : decorators) {
        decorator.decorate(toAdd);
      }
      if (index == size) {
        appendNodeToList(toAdd.getNode());
      }
 else {
        insertNodeIntoList(index,toAdd.getNode());
      }
      return (null);
    }
  }
);
}
