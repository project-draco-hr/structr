{
  if (editNodeId != null && getId() == editNodeId.longValue()) {
    renderEditFrame(out,editUrl);
  }
 else {
    if (isVisible()) {
      String html=getContent();
      if (StringUtils.isNotBlank(html)) {
        StringWriter content=new StringWriter();
        replaceByFreeMarker(html,content,startNode,editUrl,editNodeId);
        StringBuilder content2=new StringBuilder(content.toString());
        replaceBySubnodes(content2,startNode,editUrl,editNodeId);
        out.append(content2.toString());
      }
    }
  }
}
