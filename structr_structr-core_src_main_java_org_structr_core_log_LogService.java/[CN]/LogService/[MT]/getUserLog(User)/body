{
  if ((user == null) || (user instanceof SuperUser)) {
    return null;
  }
  LogNodeList userLogNodeList=loggerCache.get(user);
  if (userLogNodeList == null) {
    for (    StructrRelationship rel : user.getOutgoingChildRelationships()) {
      if (rel.getEndNode() instanceof LogNodeList) {
        userLogNodeList=(LogNodeList)rel.getEndNode();
        loggerCache.put(user,userLogNodeList);
        return userLogNodeList;
      }
    }
    userLogNodeList=(LogNodeList)Services.command(securityContext,TransactionCommand.class).execute(new StructrTransaction(){
      @Override public Object execute() throws Throwable {
        Command createNode=Services.command(securityContext,CreateNodeCommand.class);
        Command createRel=Services.command(securityContext,CreateRelationshipCommand.class);
        LogNodeList<Activity> newLogNodeList=(LogNodeList<Activity>)createNode.execute(new NodeAttribute(AbstractNode.Key.type.name(),LogNodeList.class.getSimpleName()),new NodeAttribute(AbstractNode.Key.name.name(),user.getName() + "'s Activity Log"));
        createRel.execute(user,newLogNodeList,RelType.HAS_CHILD);
        return (newLogNodeList);
      }
    }
);
    loggerCache.put(user,userLogNodeList);
  }
  return userLogNodeList;
}
