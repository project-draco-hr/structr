{
  TxPageFile logDb=(TxPageFile)arguments.get("logDb");
  if (logDb != null) {
    if (parameters.length == 2) {
      String userId=(String)parameters[0];
      if (userId != null) {
synchronized (logDb) {
          Transaction tx=logDb.tx();
          MultiIndexFactory multiIndexFactory=new MultiIndexFactory(tx);
          IndexFactory<String,Object> indexFactory=new BTreeIndexFactory<String,Object>();
          SortedIndex<String,Object> index=(SortedIndex<String,Object>)multiIndexFactory.openOrCreate(userId,indexFactory);
          String[] obj=(String[])parameters[1];
          String uuid=UUID.randomUUID().toString().replaceAll("[\\-]+","");
          index.put(uuid,obj);
          logger.log(Level.FINE,"Logged for user {0}: {1}",new Object[]{userId,StringUtils.join((String[])obj,",")});
          tx.commit();
          logDb.flush();
        }
      }
    }
 else {
      throw new IllegalArgumentException();
    }
  }
  return null;
}
