{
  return (AbstractRelationship)Services.command(securityContext,TransactionCommand.class).execute(new StructrTransaction(){
    @Override public Object execute() throws FrameworkException {
      Node startNode=fromNode.getNode();
      Node endNode=toNode.getNode();
      Relationship rel=startNode.createRelationshipTo(endNode,relType);
      AbstractRelationship newRel=relationshipFactory.createRelationship(securityContext,rel);
      newRel.setProperty(AbstractRelationship.createdDate,new Date());
      if (newRel != null) {
        if ((properties != null) && !properties.isEmpty()) {
          for (          Entry<String,Object> entry : properties.entrySet()) {
            newRel.setProperty(new Property(entry.getKey()),entry.getValue());
          }
        }
        newRel.onRelationshipInstantiation();
        for (        Transformation<GraphObject> transformation : EntityContext.getEntityCreationTransformations(newRel.getClass())) {
          transformation.apply(securityContext,newRel);
        }
      }
      return newRel;
    }
  }
);
}
