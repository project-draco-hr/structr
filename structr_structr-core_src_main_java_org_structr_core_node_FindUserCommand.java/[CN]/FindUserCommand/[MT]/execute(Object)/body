{
  GraphDatabaseService graphDb=(GraphDatabaseService)arguments.get("graphDb");
  Command searchNode=Services.command(SearchNodeCommand.class);
  if (graphDb != null) {
switch (parameters.length) {
case 0:
      return (List<User>)searchNode.execute(null,null,false,false,Search.andExactType(User.class.getSimpleName()));
case 1:
    if (parameters[0] instanceof String) {
      String userName=(String)parameters[0];
      List<SearchAttribute> searchAttrs=new LinkedList<SearchAttribute>();
      searchAttrs.add(Search.andExactName(userName));
      searchAttrs.add(Search.andExactType(User.class.getSimpleName()));
      List<AbstractNode> usersFound=(List<AbstractNode>)searchNode.execute(null,null,false,false,searchAttrs);
      if (usersFound != null && usersFound.size() > 0) {
        return usersFound.get(0);
      }
 else {
        logger.log(Level.FINE,"No user with name {0} found.",userName);
        return null;
      }
    }
case 2:
  if (parameters[0] instanceof String && parameters[1] instanceof AbstractNode) {
    String userName=(String)parameters[0];
    AbstractNode topNode=(AbstractNode)parameters[1];
    List<SearchAttribute> searchAttrs=new LinkedList<SearchAttribute>();
    searchAttrs.add(Search.andExactName(userName));
    searchAttrs.add(Search.andExactType(User.class.getSimpleName()));
    List<AbstractNode> usersFound=(List<AbstractNode>)searchNode.execute(topNode,null,false,false,searchAttrs);
    if (usersFound != null && usersFound.size() > 0) {
      return usersFound.get(0);
    }
 else {
      logger.log(Level.FINE,"No user with name {0} found.",userName);
      return null;
    }
  }
break;
default :
break;
}
}
return null;
}
