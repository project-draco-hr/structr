{
  String uuid=node.getStringProperty(AbstractNode.Key.uuid);
  if (uuid == null) {
    return;
  }
  for (  Enum index : (NodeIndex[])arguments.get("indices")) {
    Set<String> properties=EntityContext.getSearchableProperties(node.getClass(),index.name());
    for (    String key : properties) {
      indexProperty(node,key,index.name());
    }
  }
  Node dbNode=node.getNode();
  if ((dbNode.hasProperty(Location.Key.latitude.name())) && (dbNode.hasProperty(Location.Key.longitude.name()))) {
    LayerNodeIndex layerIndex=(LayerNodeIndex)indices.get(NodeIndex.layer.name());
    try {
      layerIndex.add(dbNode,"","");
    }
 catch (    Exception e) {
      final Map<String,String> config=new HashMap<String,String>();
      config.put(LayerNodeIndex.LAT_PROPERTY_KEY,Location.Key.latitude.name());
      config.put(LayerNodeIndex.LON_PROPERTY_KEY,Location.Key.longitude.name());
      config.put(SpatialIndexProvider.GEOMETRY_TYPE,LayerNodeIndex.POINT_PARAMETER);
      layerIndex=new LayerNodeIndex("layerIndex",graphDb,config);
      indices.put(NodeIndex.layer.name(),layerIndex);
      layerIndex.add(dbNode,"","");
    }
  }
}
