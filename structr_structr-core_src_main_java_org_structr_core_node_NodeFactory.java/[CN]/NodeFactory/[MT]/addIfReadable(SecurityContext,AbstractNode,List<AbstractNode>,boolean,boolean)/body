{
  if (n.isHidden()) {
    n=null;
    return;
  }
  if (n.isDeleted() && !includeDeleted) {
    n=null;
    return;
  }
  if (n.isVisibleToPublicUsers()) {
    nodes.add(n);
    return;
  }
  if (publicOnly) {
    n=null;
    return;
  }
  if (securityContext.isAllowed(n,Permission.read)) {
    nodes.add(n);
    return;
  }
}
