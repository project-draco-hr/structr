{
  if (n.isHidden()) {
    return;
  }
  if (n.isDeleted() && !includeDeleted) {
    return;
  }
  if (n.isVisibleToPublicUsers()) {
    nodes.add(n);
    return;
  }
  if (securityContext.isAllowed(n,Permission.Read)) {
    nodes.add(n);
    return;
  }
}
