{
  List<AbstractNode> nodes=new LinkedList<AbstractNode>();
  User user=securityContext.getUser();
  if ((input != null) && input.iterator().hasNext()) {
    for (    Node node : input) {
      AbstractNode n=createNode(securityContext,node);
      boolean readableByUser=((user instanceof SuperUser) || securityContext.isAllowed(n,Permission.Read));
      boolean publicUserAndPublicNode=((user == null) && n.isVisibleToPublicUsers());
      if ((readableByUser || publicUserAndPublicNode) && (includeDeleted || !n.isDeleted())) {
        nodes.add(n);
      }
    }
  }
  return nodes;
}
