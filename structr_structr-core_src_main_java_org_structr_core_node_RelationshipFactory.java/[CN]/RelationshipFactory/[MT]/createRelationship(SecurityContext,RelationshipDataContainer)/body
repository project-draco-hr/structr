{
  if (data == null) {
    logger.log(Level.SEVERE,"Could not create relationship: Empty data container.");
    return null;
  }
  Map properties=data.getProperties();
  String combinedRelType=properties.containsKey(AbstractRelationship.HiddenKey.type.name()) ? (String)properties.get(AbstractRelationship.HiddenKey.type.name()) : null;
  Class relClass=EntityContext.getNamedRelationClass(combinedRelType);
  AbstractRelationship newRel=null;
  if (relClass != null) {
    try {
      newRel=(AbstractRelationship)relClass.newInstance();
    }
 catch (    Throwable t) {
      newRel=null;
    }
  }
  if (newRel == null) {
    newRel=new GenericRelationship();
  }
  newRel.init(securityContext,data);
  newRel.commit();
  return newRel;
}
