{
  GraphDatabaseService graphDb=(GraphDatabaseService)arguments.get("graphDb");
  NodeFactory nodeFactory=new NodeFactory(securityContext);
  if (graphDb != null) {
    Index<Node> index=(Index<Node>)arguments.get(whichIndex.name());
    IndexHits hits=index.query(query.toString());
    Result result=nodeFactory.createNodes(hits);
    hits.close();
    return result;
  }
  return new Result(new LinkedList<AbstractNode>(),null,false,false);
}
