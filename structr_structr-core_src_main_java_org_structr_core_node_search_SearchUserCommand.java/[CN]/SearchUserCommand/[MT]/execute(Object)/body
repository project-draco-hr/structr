{
  final Command findNode=Services.command(securityContext,FindNodeCommand.class);
switch (parameters.length) {
case 1:
{
      final Index<Node> index=getIndexFromArguments(NodeIndex.user,arguments);
      if (parameters[0] instanceof String) {
        final String userName=(String)parameters[0];
        for (        final Node n : index.get(AbstractNode.Key.name.name(),userName)) {
          final AbstractNode s=(AbstractNode)findNode.execute(n);
          if (s.getType().equals(Principal.class.getSimpleName())) {
            return s;
          }
        }
      }
    }
  break;
case 3:
{
  final String userNickName=(String)parameters[0];
  final PropertyKey key=(PropertyKey)parameters[1];
  final NodeIndex idx=(NodeIndex)parameters[2];
  final Index<Node> index=getIndexFromArguments(idx,arguments);
  final IndexHits<Node> indexHits=index.query(key.name(),"\"" + userNickName + "\"");
  try {
    for (    final Node n : indexHits) {
      final Object u=findNode.execute(n);
      if (u != null) {
        return u;
      }
    }
  }
  finally {
    indexHits.close();
  }
}
break;
default :
break;
}
return null;
}
