{
  PropertyMap groupedProperties=new PropertyMap();
  Boolean nullValuesOnly=source.getProperty(nullValuesOnlyProperty);
  if (nullValuesOnly != null && nullValuesOnly.booleanValue()) {
    return null;
  }
  for (  PropertyKey key : propertyKeys.values()) {
    Object value=source.getProperty(new GroupPropertyWrapper(key));
    PropertyConverter converter=key.inputConverter(securityContext);
    if (converter != null) {
      try {
        Object convertedValue=converter.revert(value);
        groupedProperties.put(key,convertedValue);
        if (convertedValue != null) {
          nullValuesOnly=false;
        }
      }
 catch (      Throwable t) {
        t.printStackTrace();
        logger.log(Level.WARNING,"Unable to convert grouped property {0} on type {1}: {2}",new Object[]{key.dbName(),source.getClass().getSimpleName(),t.getMessage()});
      }
    }
 else {
      groupedProperties.put(key,value);
      if (value != null) {
        nullValuesOnly=false;
      }
    }
  }
  return groupedProperties;
}
