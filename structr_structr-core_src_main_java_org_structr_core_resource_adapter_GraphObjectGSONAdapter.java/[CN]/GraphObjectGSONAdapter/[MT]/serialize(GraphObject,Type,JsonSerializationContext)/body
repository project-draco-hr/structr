{
  OutputMode outputMode=threadLocalOutputMode.get();
  if (outputMode == null) {
    outputMode=OutputMode.NestedKeyValueType;
  }
  JsonElement serializedOutput=null;
switch (threadLocalOutputMode.get()) {
case NestedKeyValueType:
    serializedOutput=serializeNestedKeyValueType(src,typeOfSrc,context,true);
  break;
case NestedKeyValue:
serializedOutput=serializeNestedKeyValueType(src,typeOfSrc,context,false);
break;
case FlatNameValue:
serializedOutput=serializeFlatNameValue(src,typeOfSrc,context);
break;
}
return serializedOutput;
}
