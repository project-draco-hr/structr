{
  CurrentRequest.setAccessMode(AccessMode.Frontend);
  try {
    Result result=getResults(request);
    if (result != null) {
      final PropertySet propertySet=gson.fromJson(request.getReader(),PropertySet.class);
      final List<GraphObject> results=result.getResults();
      if (results != null && !results.isEmpty()) {
        Services.command(TransactionCommand.class).execute(new StructrTransaction(){
          @Override public Object execute() throws Throwable {
            for (            GraphObject obj : results) {
              for (              NodeAttribute attr : propertySet.getAttributes()) {
                obj.setProperty(attr.getKey(),attr.getValue());
              }
            }
            return null;
          }
        }
);
      }
 else {
        throw new NotFoundException();
      }
    }
 else {
      throw new NotFoundException();
    }
    response.setStatus(HttpServletResponse.SC_OK);
  }
 catch (  PathException pathException) {
    response.setStatus(pathException.getStatus());
  }
catch (  JsonSyntaxException jsex) {
    response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
  }
catch (  JsonParseException jpex) {
    response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
  }
catch (  Throwable t) {
    response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
  }
}
