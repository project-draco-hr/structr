{
  List<SearchAttribute> searchAttributes=new LinkedList<SearchAttribute>();
  boolean hasSearchableAttributes=false;
  AbstractNode topNode=null;
  boolean includeDeleted=false;
  boolean publicOnly=false;
  if (type != null) {
    searchAttributes.addAll(Search.andExactTypeAndSubtypes(CaseHelper.toCamelCase(type)));
    hasSearchableAttributes=hasSearchableAttributes(searchAttributes);
    List<GraphObject> results=(List<GraphObject>)Services.command(securityContext,SearchNodeCommand.class).execute(topNode,includeDeleted,publicOnly,searchAttributes);
    if (!results.isEmpty()) {
      return results;
    }
  }
 else {
    logger.log(Level.WARNING,"type was null");
  }
  if (hasSearchableAttributes) {
    throw new NotFoundException();
  }
 else {
    throw new NoResultsException();
  }
}
