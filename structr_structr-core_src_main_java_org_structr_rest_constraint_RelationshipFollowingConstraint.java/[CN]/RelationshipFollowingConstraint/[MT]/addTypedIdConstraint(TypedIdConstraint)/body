{
  logger.log(Level.INFO,"Adding id {0} to id set",typedIdConstraint.getIdConstraint().getId());
  if (!idSet.add(typedIdConstraint.getIdConstraint().getId())) {
    throw new IllegalPathException();
  }
  String type1=lastConstraint.getTypeConstraint().getType();
  String type2=typedIdConstraint.getTypeConstraint().getType();
  DirectedRelationship rel=EntityContext.getRelation(type1,type2);
  if (rel != null) {
    if (!visitedRelationships.contains(rel)) {
      traversalDescription.relationships(rel.getRelType(),rel.getDirection());
      visitedRelationships.add(rel);
    }
  }
 else {
    logger.log(Level.INFO,"No relationship defined between {0} and {1}, illegal path",new Object[]{type1,type2});
    throw new IllegalPathException();
  }
  lastConstraint=typedIdConstraint;
}
