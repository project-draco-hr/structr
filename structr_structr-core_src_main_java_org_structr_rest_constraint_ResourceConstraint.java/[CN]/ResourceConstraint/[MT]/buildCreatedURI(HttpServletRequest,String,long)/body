{
  StringBuilder uriBuilder=new StringBuilder(100);
  uriBuilder.append(request.getScheme());
  uriBuilder.append("://");
  uriBuilder.append(request.getServerName());
  uriBuilder.append(":");
  uriBuilder.append(request.getServerPort());
  uriBuilder.append(request.getContextPath());
  uriBuilder.append(request.getServletPath());
  uriBuilder.append("/");
  if (type != null) {
    uriBuilder.append(type.toLowerCase());
    uriBuilder.append("s/");
  }
  uriBuilder.append(id);
  return uriBuilder.toString();
}
