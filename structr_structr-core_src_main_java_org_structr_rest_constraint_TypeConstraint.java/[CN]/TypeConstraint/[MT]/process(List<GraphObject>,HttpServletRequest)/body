{
  if (results == null) {
    List<SearchAttribute> searchAttributes=new LinkedList<SearchAttribute>();
    User user=new SuperUser();
    AbstractNode topNode=null;
    boolean includeDeleted=false;
    boolean publicOnly=false;
    if (type != null) {
      searchAttributes.add(new TextualSearchAttribute("type",type,SearchOperator.OR));
      results=(List<GraphObject>)Services.command(securityContext,SearchNodeCommand.class).execute(topNode,includeDeleted,publicOnly,searchAttributes);
      if (!results.isEmpty()) {
        return results;
      }
    }
  }
 else {
    logger.log(Level.WARNING,"Received results from predecessor, this query is probably not optimized!");
    for (Iterator<GraphObject> it=results.iterator(); it.hasNext(); ) {
      if (!type.equalsIgnoreCase(it.next().getType())) {
        it.remove();
      }
    }
    return results;
  }
  throw new NoResultsException();
}
