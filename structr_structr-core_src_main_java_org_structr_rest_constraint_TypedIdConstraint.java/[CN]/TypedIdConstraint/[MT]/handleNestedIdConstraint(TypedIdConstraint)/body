{
  AbstractNode node1=this.getTypesafeNode();
  AbstractNode node2=next.getTypesafeNode();
  String type1=node1.getType();
  String type2=node2.getType();
  DirectedRelationship rel=EntityContext.getRelation(type1,type2);
  if (rel != null) {
    RelationshipType relType=rel.getRelType();
    Direction direction=rel.getDirection();
    Set<AbstractNode> relatedNodes=node1.getTraversalResults(relType,direction,type2);
    if (relatedNodes.contains(node2)) {
      return next;
    }
  }
  logger.log(Level.WARNING,"No relationship found between {0} and {1}, throwing 404",new Object[]{node1.getId(),node2.getId()});
  throw new NotFoundException();
}
