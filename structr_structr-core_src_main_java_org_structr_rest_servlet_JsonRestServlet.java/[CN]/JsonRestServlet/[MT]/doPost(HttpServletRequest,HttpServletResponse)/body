{
  try {
    SecurityContext securityContext=getSecurityContext(request);
    final PropertySet propertySet=gson.fromJson(request.getReader(),PropertySet.class);
    ResourceConstraint resourceConstraint=optimizeConstraintChain(parsePath(securityContext,request));
    if (propertySet != null) {
      resourceConstraint.doPost(propertySet);
    }
 else {
      logger.log(Level.WARNING,"propertySet was null!");
    }
  }
 catch (  IllegalArgumentException illegalArgumentException) {
    StringBuilder errorBuffer=new StringBuilder(100);
    errorBuffer.append(illegalArgumentException.getMessage());
    response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
    response.setContentLength(errorBuffer.length());
    response.getWriter().append(errorBuffer.toString());
    response.getWriter().flush();
    response.getWriter().close();
  }
catch (  PathException pathException) {
    response.setStatus(pathException.getStatus());
  }
catch (  JsonSyntaxException jsex) {
    response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
  }
catch (  JsonParseException jpex) {
    response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
  }
catch (  Throwable t) {
    response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
    logger.log(Level.WARNING,"Exception",t);
  }
}
