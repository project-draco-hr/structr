{
  if (mode <= PROFILE) {
    PageElm page=(PageElm)pageByPathMap.get(path);
    if (page == null) {
      String jspPath=StringUtils.replace(path,".htm",".jsp");
      page=(PageElm)pageByPathMap.get(jspPath);
    }
    if (page != null) {
      return page.getPageClass();
    }
 else {
      return null;
    }
  }
 else {
synchronized (PAGE_LOAD_LOCK) {
      PageElm page=(PageElm)pageByPathMap.get(path);
      if (page == null) {
        String jspPath=StringUtils.replace(path,".htm",".jsp");
        page=(PageElm)pageByPathMap.get(jspPath);
      }
      if (page != null) {
        return page.getPageClass();
      }
      Class pageClass=null;
      try {
        URL resource=servletContext.getResource(path);
        if (resource != null) {
          for (int i=0; i < pagePackages.size(); i++) {
            String pagesPackage=pagePackages.get(i).toString();
            pageClass=getPageClass(path,pagesPackage);
            if (pageClass != null) {
              page=new PageElm(path,pageClass,commonHeaders,autobinding);
              pageByPathMap.put(page.getPath(),page);
              addToClassMap(page);
              if (logService.isDebugEnabled()) {
                String msg=path + " -> " + pageClass.getName();
                logService.debug(msg);
              }
              break;
            }
          }
        }
      }
 catch (      MalformedURLException e) {
      }
      return pageClass;
    }
  }
}
