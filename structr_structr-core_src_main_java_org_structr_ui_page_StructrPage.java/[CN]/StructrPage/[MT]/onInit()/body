{
  super.onInit();
  CurrentRequest.setCurrentNodePath(nodeId);
  node=getNodeByIdOrPath(nodeId);
  if (node == null) {
    return;
  }
  nodeId=node.getIdString();
  if (isSuperUser) {
    readAllowed=true;
    showTreeAllowed=true;
    writeAllowed=true;
    accessControlAllowed=true;
    createNodeAllowed=true;
    deleteNodeAllowed=true;
    editPropertiesAllowed=true;
    editVisibilityAllowed=true;
    addRelationshipAllowed=true;
    removeRelationshipAllowed=true;
  }
 else   if ((user != null) && (node != null)) {
    readAllowed=node.readAllowed();
    showTreeAllowed=node.showTreeAllowed();
    writeAllowed=node.writeAllowed();
    accessControlAllowed=node.accessControlAllowed();
    createNodeAllowed=node.createSubnodeAllowed();
    deleteNodeAllowed=node.deleteNodeAllowed();
    editPropertiesAllowed=node.editPropertiesAllowed();
    editVisibilityAllowed=node.editPropertiesAllowed();
    addRelationshipAllowed=node.addRelationshipAllowed();
    removeRelationshipAllowed=node.removeRelationshipAllowed();
  }
  CurrentRequest.onRequestStart();
}
