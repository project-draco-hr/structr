{
  Command transactionCommand=Services.command(securityContext,TransactionCommand.class);
  transactionCommand.execute(new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      Command createNode=Services.command(securityContext,CreateNodeCommand.class);
      Command createRel=Services.command(securityContext,CreateRelationshipCommand.class);
      User adminUser=(User)createNode.execute(new NodeAttribute(AbstractNode.Key.type.name(),User.class.getSimpleName()),new NodeAttribute(AbstractNode.Key.name.name(),"admin"),new SuperUser());
      AbstractNode rootNode=getRootNode();
      createRel.execute(rootNode,adminUser,RelType.HAS_CHILD);
      String password=RandomStringUtils.randomAlphanumeric(8);
      adminUser.setPassword(password);
      okMsg="New " + adminUser.getType() + " node "+ adminUser.getName()+ " has been created with password "+ password;
      StructrRelationship securityRel=(StructrRelationship)createRel.execute(adminUser,rootNode,RelType.SECURITY);
      securityRel.setAllowed(Arrays.asList(StructrRelationship.ALL_PERMISSIONS));
      return adminUser;
    }
  }
);
  return redirect();
}
