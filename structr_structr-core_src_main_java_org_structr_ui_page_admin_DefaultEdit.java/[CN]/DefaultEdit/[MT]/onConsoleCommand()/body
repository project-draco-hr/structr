{
  List<String> consoleLines=getConsoleLines();
  final CallbackValue<String> newNodeId=new CallbackValue<String>(nodeId);
  Callback callback=new Callback(){
    @Override public void callback(    Object... params){
      if (params.length > 0) {
        newNodeId.setValue(params[0].toString());
      }
    }
  }
;
  consoleLines.add(Services.command(NodeConsoleCommand.class).execute(node,consoleCommand.getValue(),callback).toString());
  if (consoleLines.size() > 20) {
    consoleLines.remove(0);
  }
  readConsoleOutput();
  StringBuilder redirectPath=new StringBuilder(100);
  redirectPath.append(getContext().getRequest().getContextPath());
  redirectPath.append(getPath());
  redirectPath.append("?nodeId=").append(newNodeId.getValue());
  redirectPath.append("#console-tab");
  nodeTree.expand(getTreeNode(newNodeId.getValue()));
  redirect=redirectPath.toString();
  return (true);
}
