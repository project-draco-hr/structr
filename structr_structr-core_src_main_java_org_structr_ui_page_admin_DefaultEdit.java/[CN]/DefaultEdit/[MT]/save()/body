{
  final Command transactionCommand=Services.command(securityContext,TransactionCommand.class);
  StructrTransaction transaction=new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      AbstractNode s=getNodeByIdOrPath(getNodeId());
      if (editPropertiesForm.isValid()) {
        editPropertiesForm.copyTo(s);
        transactionCommand.setExitCode(Command.exitCode.SUCCESS);
        okMsg="Form data saved successfully";
      }
 else {
        transactionCommand.setExitCode(Command.exitCode.FAILURE);
        errorMsg="Properties form is invalid";
        transactionCommand.setErrorMessage(errorMsg);
      }
      return (null);
    }
  }
;
  transactionCommand.execute(transaction);
  if (transaction.getCause() != null) {
    okMsg=transaction.getCause().getMessage();
    logger.log(Level.WARNING,"Exception while storing properties",transaction.getCause());
  }
}
