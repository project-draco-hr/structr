{
  super();
  searchFields.setColumns(5);
  searchFields.add(searchTextField);
  searchFields.add(inNameCheckbox);
  searchFields.add(inTitleCheckbox);
  searchFields.add(inContentCheckbox);
  searchOpSelect.add(new Option(SearchOperator.OR));
  searchOpSelect.add(new Option(SearchOperator.AND));
  searchFields.add(searchOpSelect);
  advancedSearchForm.setActionURL(advancedSearchForm.getActionURL().concat("#search-tab"));
  advancedSearchForm.add(searchFields);
  advancedSearchForm.add(new Submit("Search"));
  advancedSearchForm.setListener(this,"onAdvancedSearch");
  advancedSearchForm.add(new Submit("Reset",this,"onReset"));
  Column actionColumnNodes=new Column("Actions");
  actionColumnNodes.setTextAlign("center");
  actionColumnNodes.setDecorator(new LinkDecorator(searchResultsTable,new PageLink(),AbstractNode.Key.nodeId.name()){
    @Override protected void renderActionLink(    HtmlStringBuffer buffer,    AbstractLink link,    Context context,    Object row,    Object value){
      AbstractNode n=(AbstractNode)row;
      link=new PageLink(AbstractNode.Key.nodeId.name(),getEditPageClass(n)){
        @Override public String getHref(){
          if (getPageClass() == null) {
            throw new IllegalStateException("target pageClass is not defined");
          }
          Context context=getContext();
          HtmlStringBuffer buffer=new HtmlStringBuffer();
          buffer.append(context.getRequest().getContextPath());
          String pagePath=context.getPagePath(getPageClass());
          if (pagePath != null && pagePath.endsWith(".jsp")) {
            pagePath=StringUtils.replace(pagePath,".jsp",".htm");
          }
          buffer.append(pagePath);
          if (hasParameters()) {
            buffer.append("?");
            renderParameters(buffer,getParameters(),context);
          }
          return context.getResponse().encodeURL(buffer.toString());
        }
      }
;
      link.setParameter(NODE_ID_KEY,n.getId());
      link.setImageSrc("/images/table-edit.png");
      super.renderActionLink(buffer,link,context,row,value);
    }
  }
);
  Column typeColumn=new Column(AbstractNode.Key.type.name());
  LinkDecorator iconDec=new LinkDecorator(searchResultsTable,new PageLink(),AbstractNode.Key.nodeId.name()){
    @Override protected void renderActionLink(    HtmlStringBuffer buffer,    AbstractLink link,    Context context,    Object row,    Object value){
      AbstractNode n=(AbstractNode)row;
      link=new PageLink(AbstractNode.Key.nodeId.name(),getEditPageClass(n));
      link.setParameter(NODE_ID_KEY,n.getId());
      link.setImageSrc(n.getIconSrc());
      super.renderActionLink(buffer,link,context,row,value);
    }
  }
;
  typeColumn.setDecorator(iconDec);
  searchResultsTable.addColumn(typeColumn);
  Column nameColumn=new Column(AbstractNode.Key.name.name());
  LinkDecorator nameDec=new LinkDecorator(searchResultsTable,new PageLink(),"id"){
    @Override protected void renderActionLink(    HtmlStringBuffer buffer,    AbstractLink link,    Context context,    Object row,    Object value){
      AbstractNode n=(AbstractNode)row;
      PageLink pageLink=new PageLink("id",getEditPageClass(n)){
        @Override public String getHref(){
          if (getPageClass() == null) {
            throw new IllegalStateException("target pageClass is not defined");
          }
          Context context=getContext();
          HtmlStringBuffer buffer=new HtmlStringBuffer();
          buffer.append(context.getRequest().getContextPath());
          String pagePath=context.getPagePath(getPageClass());
          if (pagePath != null && pagePath.endsWith(".jsp")) {
            pagePath=StringUtils.replace(pagePath,".jsp",".htm");
          }
          buffer.append(pagePath);
          if (hasParameters()) {
            buffer.append("?");
            renderParameters(buffer,getParameters(),context);
          }
          return context.getResponse().encodeURL(buffer.toString());
        }
      }
;
      pageLink.setParameter(NODE_ID_KEY,n.getId());
      pageLink.setLabel(n.getName());
      super.renderActionLink(buffer,pageLink,context,row,value);
    }
  }
;
  nameColumn.setDecorator(nameDec);
  searchResultsTable.addColumn(nameColumn);
  searchResultsTable.addColumn(new Column(AbstractNode.Key.lastModifiedDate.name()));
  searchResultsTable.addColumn(new Column(AbstractNode.Key.owner.name()));
  searchResultsTable.addColumn(new Column(AbstractNode.Key.createdBy.name()));
  searchResultsTable.addColumn(new Column(AbstractNode.Key.createdDate.name()));
  searchResultsTable.addColumn(new Column(AbstractNode.Key.position.name()));
  searchResultsTable.addColumn(new Column(AbstractNode.Key.visibleToPublicUsers.name()));
  searchResultsTable.addColumn(actionColumnNodes);
  searchResultsTable.setSortable(true);
  searchResultsTable.setShowBanner(true);
  searchResultsTable.setPageSize(DEFAULT_PAGESIZE);
  searchResultsTable.getControlLink().setParameter(AbstractNode.Key.nodeId.name(),getNodeId());
  searchResultsTable.setClass(TABLE_CLASS);
}
