{
  AbstractMessage message=AbstractMessage.createMessage(connection,data);
  if (message != null) {
    Map<String,String> result=message.processMessage();
    if (result != null) {
      result.put(AbstractMessage.COMMAND_KEY,message.getCommand());
      broadcast(gson.toJson(result,new TypeToken<Map<String,String>>(){
      }
.getType()));
    }
 else {
    }
  }
}
