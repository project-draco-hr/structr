{
  SecurityContext securityContext=SecurityContext.getSuperUserInstance();
  String sourceId=webSocketData.getId();
  String targetId=webSocketData.getData().get("id");
  if ((sourceId != null) && (targetId != null)) {
    AbstractNode sourceNode=getNode(sourceId);
    AbstractNode targetNode=getNode(targetId);
    if ((sourceNode != null) && (targetNode != null)) {
      DirectedRelationship rel=EntityContext.getRelation(sourceNode.getClass(),targetNode.getClass(),true);
      if (rel != null) {
        try {
          rel.createRelationship(securityContext,sourceNode,targetNode);
        }
 catch (        Throwable t) {
          getWebSocket().send(MessageBuilder.status().code(400).message(t.getMessage()).build(),true);
        }
      }
    }
 else {
      getWebSocket().send(MessageBuilder.status().code(404).build(),true);
    }
  }
 else {
    getWebSocket().send(MessageBuilder.status().code(400).message("Add needs id and data.id!").build(),true);
  }
}
