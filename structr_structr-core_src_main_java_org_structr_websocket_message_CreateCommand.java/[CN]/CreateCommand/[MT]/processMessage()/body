{
  StructrTransaction transaction=new StructrTransaction(){
    @Override public Object execute() throws Throwable {
      return (AbstractNode)Services.command(SecurityContext.getSuperUserInstance(),CreateNodeCommand.class).execute(getParameters());
    }
  }
;
  AbstractNode newNode=(AbstractNode)Services.command(SecurityContext.getSuperUserInstance(),TransactionCommand.class).execute(transaction);
  if (transaction.getCause() != null) {
    logger.log(Level.WARNING,"Could not create node.",transaction.getCause());
  }
 else {
    if (newNode != null) {
      getParameters().put(AbstractMessage.UUID_KEY,newNode.getStringProperty(AbstractNode.Key.uuid));
      return getParameters();
    }
 else {
      logger.log(Level.WARNING,"Could not create new node.");
    }
  }
  return null;
}
