{
  try {
    AbstractNode node;
    final Map<String,Object> props=new HashMap<String,Object>();
    String type="UnknownTestType";
    String name="GenericNode-name";
    props.put(AbstractNode.Key.type.name(),type);
    props.put(AbstractNode.Key.name.name(),name);
    node=(AbstractNode)transactionCommand.execute(new StructrTransaction(){
      @Override public Object execute() throws FrameworkException {
        return (AbstractNode)createNodeCommand.execute(props);
      }
    }
);
    assertTrue(node.getStringProperty(AbstractNode.Key.type).equals(type));
    assertTrue(node.getStringProperty(AbstractNode.Key.name).equals(name));
    assertTrue(!node.getBooleanProperty(AbstractNode.Key.hidden));
    assertTrue(!node.getBooleanProperty(AbstractNode.Key.deleted));
    assertTrue(!node.getBooleanProperty(AbstractNode.Key.visibleToAuthenticatedUsers));
    assertTrue(!node.getBooleanProperty(AbstractNode.Key.visibleToPublicUsers));
    name="GenericNode-name-????????";
    node.setProperty(AbstractNode.Key.name,name);
    assertTrue(node.getStringProperty(AbstractNode.Key.name).equals(name));
    node.setProperty(AbstractNode.Key.hidden,true);
    assertTrue(node.getBooleanProperty(AbstractNode.Key.hidden));
    node.setProperty(AbstractNode.Key.deleted,true);
    assertTrue(node.getBooleanProperty(AbstractNode.Key.deleted));
    node.setProperty(AbstractNode.Key.visibleToAuthenticatedUsers,true);
    assertTrue(node.getBooleanProperty(AbstractNode.Key.visibleToAuthenticatedUsers));
    node.setProperty(AbstractNode.Key.visibleToPublicUsers,true);
    assertTrue(node.getBooleanProperty(AbstractNode.Key.visibleToPublicUsers));
  }
 catch (  FrameworkException ex) {
    logger.log(Level.SEVERE,ex.toString());
    fail("Unexpected exception");
  }
}
