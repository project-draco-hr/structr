{
  if (isVisible(user)) {
    if (hasTemplate(user)) {
      String html=template.getContent();
      if (StringUtils.isNotBlank(html)) {
        for (        AbstractNode container : getSortedDirectChildren(RelType.DATA,user)) {
          for (          AbstractNode node : container.getSortedDirectChildNodes(user)) {
            StringWriter content=new StringWriter(100);
            AbstractNode.staticReplaceByFreeMarker(html,content,node,editUrl,editNodeId,user);
            out.append(content.toString());
          }
        }
      }
 else {
        logger.log(Level.WARNING,"No template!");
      }
    }
  }
 else {
    logger.log(Level.WARNING,"Node not visible");
  }
}
