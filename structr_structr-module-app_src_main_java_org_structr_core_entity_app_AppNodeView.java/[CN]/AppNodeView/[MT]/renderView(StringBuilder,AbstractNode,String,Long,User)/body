{
  AbstractNode sourceNode=getNodeFromLoader();
  if (sourceNode != null) {
    if (hasTemplate(user)) {
      String html=template.getContent();
      if (StringUtils.isNotBlank(html)) {
        StringWriter content=new StringWriter(100);
        AbstractNode.staticReplaceByFreeMarker(html,content,sourceNode,editUrl,editNodeId,user);
        out.append(content.toString());
      }
 else {
        logger.log(Level.WARNING,"No template!");
      }
    }
 else {
      logger.log(Level.WARNING,"No template!");
    }
  }
 else {
    logger.log(Level.WARNING,"sourceNode was null");
  }
}
