{
  Command createNodeCommand=Services.command(CreateNodeCommand.class);
  List<NodeAttribute> attrs=new LinkedList<NodeAttribute>();
  attrs.add(new NodeAttribute(TYPE_KEY,nodeType));
  attrs.add(new NodeAttribute(NAME_KEY,name));
  AbstractNode ret=(AbstractNode)createNodeCommand.execute(attrs);
  if (parent != null) {
    linkNodes(parent,ret,RelType.HAS_CHILD);
  }
  if (template != null) {
    linkNodes(ret,template,RelType.USE_TEMPLATE);
  }
  return (ret);
}
