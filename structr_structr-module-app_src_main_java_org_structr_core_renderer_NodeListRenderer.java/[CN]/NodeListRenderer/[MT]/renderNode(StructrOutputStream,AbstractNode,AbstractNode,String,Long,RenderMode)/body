{
  SecurityContext securityContext=out.getSecurityContext();
  if (securityContext.isVisible(currentNode)) {
    if (currentNode.hasTemplate()) {
      Template template=currentNode.getTemplate();
      String html=template.getContent();
      if (StringUtils.isNotBlank(html)) {
        init(out.getRequest(),currentNode);
        List<AbstractNode> nodesToRender=new LinkedList<AbstractNode>();
        for (        AbstractNode container : currentNode.getDirectChildren(RelType.DATA)) {
          collectDataNodes(out.getRequest(),container,nodesToRender,0,255);
        }
        int toIndex=Math.min(pageNo * pageSize,nodesToRender.size());
        int fromIndex=Math.min(Math.max(pageNo - 1,0) * pageSize,toIndex);
        logger.log(Level.INFO,"Showing list elements from {0} to {1}",new Object[]{fromIndex,toIndex});
        for (        AbstractNode n : nodesToRender.subList(fromIndex,toIndex)) {
          doRendering(out,currentNode,n,editUrl,editNodeId);
        }
      }
 else {
        logger.log(Level.WARNING,"No template!");
      }
    }
  }
 else {
    logger.log(Level.WARNING,"Node not visible");
  }
}
