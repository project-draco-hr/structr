{
  CoordinateReferenceSystem crs=null;
  for (  PropertyDescriptor att : schema.getDescriptors()) {
    if (!attNames.contains(att.getName().getLocalPart())) {
      continue;
    }
    if (att instanceof GeometryDescriptor) {
      GeometryDescriptor gd=(GeometryDescriptor)att;
      CoordinateReferenceSystem gdCrs=gd.getCoordinateReferenceSystem();
      if (crs == null) {
        crs=gdCrs;
      }
 else       if (gdCrs == null) {
        crs=null;
        break;
      }
 else       if (!CRS.equalsIgnoreMetadata(crs,gdCrs)) {
        crs=null;
        break;
      }
    }
  }
  return crs;
}
