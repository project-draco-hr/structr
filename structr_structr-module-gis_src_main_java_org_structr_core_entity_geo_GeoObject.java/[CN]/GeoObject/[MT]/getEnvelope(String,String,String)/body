{
  Envelope result=null;
  Command graphDbCommand=Services.command(securityContext,GraphDatabaseCommand.class);
  GraphDatabaseService graphDb=(GraphDatabaseService)graphDbCommand.execute();
  SpatialDatabaseService spatialService=new SpatialDatabaseService(graphDb);
  layer=spatialService.getLayer(layerName);
  spatialIndex=layer.getIndex();
  enc=layer.getGeometryEncoder();
  for (  Node g : layer.getDataset().getAllGeometryNodes()) {
    if (enc.hasAttribute(g,nameAttribute) && enc.getAttribute(g,nameAttribute).equals(featureName)) {
      result=enc.decodeEnvelope(g);
      return result;
    }
  }
  logger.log(Level.WARNING,"No envelope found.");
  return null;
}
