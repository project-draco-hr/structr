{
  if (template != null) {
    StringBuilder content=new StringBuilder(template);
    int start=content.indexOf(KEY_PREFIX);
    while (start > -1) {
      int end=content.indexOf(KEY_SUFFIX,start + KEY_PREFIX.length());
      if (end < 0) {
        logger.log(Level.WARNING,"Key suffix {0} not found in template",new Object[]{KEY_SUFFIX});
        break;
      }
      String key=content.substring(start + KEY_PREFIX.length(),end);
      StringBuilder replacement=new StringBuilder();
      replacement.append(parameterMap.get(key));
      String replaceBy=replacement.toString();
      content.replace(start,end + KEY_SUFFIX.length(),replaceBy);
      start=content.indexOf(KEY_PREFIX,start + replaceBy.length() + 1);
    }
    return content.toString();
  }
 else {
    return null;
  }
}
