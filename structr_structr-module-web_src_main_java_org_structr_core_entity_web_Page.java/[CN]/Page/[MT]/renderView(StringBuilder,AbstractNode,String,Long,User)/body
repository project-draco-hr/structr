{
  if (editNodeId != null && getId() == editNodeId.longValue()) {
    renderEditFrame(out,editUrl);
  }
 else {
    if (hasTemplate(user)) {
      template.setRequest(getRequest());
      template.setRequestedNodePath(requestedNodePath);
      template.setCallingNode(this);
      template.renderView(out,startNode,editUrl,editNodeId,user);
    }
 else {
      List<AbstractNode> subnodes=getSortedDirectChildAndLinkNodes(user);
      for (      AbstractNode s : subnodes) {
        s.setRequest(getRequest());
        s.setRequestedNodePath(requestedNodePath);
        s.renderView(out,startNode,editUrl,editNodeId,user);
      }
    }
  }
}
