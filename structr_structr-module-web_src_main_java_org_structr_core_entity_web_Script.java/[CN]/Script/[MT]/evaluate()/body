{
  StringBuilder ret=new StringBuilder();
  try {
    HttpServletRequest request=StructrContext.getRequest();
    HttpSession session=StructrContext.getSession();
    Interpreter interpreter=new Interpreter();
    interpreter.set("_buffer",ret);
    interpreter.set("_session",session);
    interpreter.set("_request",request);
    String contents=getText();
    interpreter.eval(contents);
  }
 catch (  Throwable t) {
    StringWriter stringWriter=new StringWriter();
    PrintWriter writer=new PrintWriter(stringWriter);
    t.printStackTrace(writer);
    ret.append(stringWriter.getBuffer().toString());
  }
  return (ret.toString());
}
