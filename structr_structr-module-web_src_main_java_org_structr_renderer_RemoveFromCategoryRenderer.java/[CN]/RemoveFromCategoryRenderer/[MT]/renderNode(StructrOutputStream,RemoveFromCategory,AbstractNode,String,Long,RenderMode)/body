{
  HttpServletRequest request=out.getRequest();
  if (request == null) {
    return;
  }
  HttpSession session=request.getSession();
  if (session == null) {
    return;
  }
  String usernameFromSession=(String)session.getAttribute(WebNode.Key.username.name());
  Boolean loggedIn=usernameFromSession != null;
  if (!loggedIn) {
    logger.log(Level.WARNING,"Not logged in");
    return;
  }
  Boolean sessionBlocked=(Boolean)session.getAttribute(WebNode.Key.sessionBlocked.name());
  if (Boolean.TRUE.equals(sessionBlocked)) {
    logger.log(Level.WARNING,"Session blocked");
    return;
  }
  String categoryParameterName=currentNode.getCategoryParameterName() != null ? currentNode.getCategoryParameterName() : defaultCategoryParameterName;
  String categoryName=request.getParameter(categoryParameterName);
  String objectId=request.getParameter("id");
  if (StringUtils.isEmpty(categoryName)) {
    logger.log(Level.WARNING,"No category given");
    return;
  }
  if (StringUtils.isEmpty(objectId)) {
    logger.log(Level.WARNING,"No object id given");
    return;
  }
  User user=out.getSecurityContext().getUser();
  if (user != null) {
    user.removeFromCategory(categoryName,objectId);
  }
}
