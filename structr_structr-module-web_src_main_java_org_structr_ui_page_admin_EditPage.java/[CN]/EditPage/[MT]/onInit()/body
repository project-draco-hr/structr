{
  super.onInit();
  if (node instanceof Page) {
    page=(Page)node;
    externalViewUrl=page.getNodeURL(contextPath);
    localViewUrl=getContext().getRequest().getContextPath().concat("/view".concat(page.getNodePath().replace("&","%26"))).concat(previewParameters());
    StructrOutputStream out=new StructrOutputStream();
    node.renderNode(out,page,null,null);
    rendition=out.toString();
    source=ClickUtils.escapeHtml(rendition);
    renditionPanel=new Panel("renditionPanel","/panel/rendition-panel.htm");
  }
}
