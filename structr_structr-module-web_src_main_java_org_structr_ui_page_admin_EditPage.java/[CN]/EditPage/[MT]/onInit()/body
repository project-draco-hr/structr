{
  super.onInit();
  if (node instanceof Page) {
    Context context=getContext();
    page=(Page)node;
    externalViewUrl=page.getNodeURL(context.getRequest(),contextPath);
    HttpServletRequest request=context.getRequest();
    localViewUrl=request.getContextPath().concat("/view".concat(page.getNodePath().replace("&","%26"))).concat(previewParameters(request));
    StructrOutputStream out=new StructrOutputStream(securityContext);
    node.renderNode(out,page,null,null);
    rendition=out.toString();
    source=ClickUtils.escapeHtml(rendition);
    renditionPanel=new Panel("renditionPanel","/panel/rendition-panel.htm");
  }
}
