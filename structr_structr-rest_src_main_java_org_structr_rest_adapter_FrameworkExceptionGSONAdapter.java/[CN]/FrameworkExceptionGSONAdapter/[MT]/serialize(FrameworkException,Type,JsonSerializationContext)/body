{
  JsonObject container=new JsonObject();
  JsonObject error=new JsonObject();
  container.add("code",new JsonPrimitive(src.getStatus()));
  if (src.getMessage() != null) {
    container.add("message",new JsonPrimitive(src.getMessage()));
  }
  ErrorBuffer errorBuffer=src.getErrorBuffer();
  if (errorBuffer != null) {
    Map<String,List<ErrorToken>> tokens=errorBuffer.getErrorTokens();
    if (!tokens.isEmpty()) {
      for (      Entry<String,List<ErrorToken>> entry : tokens.entrySet()) {
        List<ErrorToken> list=entry.getValue();
        String type=entry.getKey();
        JsonArray array=new JsonArray();
        for (        ErrorToken token : list) {
          array.add(token.getContent());
        }
        error.add(type,array);
      }
      container.add("errors",error);
    }
  }
  return container;
}
