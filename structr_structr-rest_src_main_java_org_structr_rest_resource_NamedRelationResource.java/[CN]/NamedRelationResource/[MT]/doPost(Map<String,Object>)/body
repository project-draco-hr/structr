{
  AbstractRelationship relationshipEntity=namedRelation.newEntityClass();
  if (relationshipEntity != null) {
    relationshipEntity.init(securityContext);
    Command createRel=Services.command(securityContext,CreateRelationshipCommand.class);
    AbstractNode startNode=relationshipEntity.identifyStartNode(namedRelation,propertySet);
    AbstractNode endNode=relationshipEntity.identifyEndNode(namedRelation,propertySet);
    RelationshipType relType=namedRelation.getRelType();
    if (startNode == null) {
      throw new FrameworkException(namedRelation.getName(),new EmptyPropertyToken(relationshipEntity.getStartNodeIdKey().name()));
    }
    if (endNode == null) {
      throw new FrameworkException(namedRelation.getName(),new EmptyPropertyToken(relationshipEntity.getEndNodeIdKey().name()));
    }
    Class sourceType=namedRelation.getSourceType();
    Class destType=namedRelation.getDestType();
    propertySet.put(AbstractRelationship.HiddenKey.combinedType.name(),EntityContext.createCombinedRelationshipType(sourceType,relType,destType));
    AbstractRelationship newRel=(AbstractRelationship)createRel.execute(startNode,endNode,relType,propertySet,false);
    RestMethodResult result=new RestMethodResult(201);
    result.addHeader("Location",buildLocationHeader(newRel));
    return result;
  }
  throw new FrameworkException(422,"FIXME");
}
