{
  SecurityContext context=SecurityContext.getSuperUserInstance();
  Command createNodeCommand=Services.command(context,CreateNodeCommand.class);
  Map<String,Object> attrs=new HashMap<String,Object>();
  attrs.put(AbstractNode.Key.type.name(),type);
  attrs.put(AbstractNode.Key.name.name(),name);
  if (attributes != null) {
    for (    NodeAttribute attr : attributes) {
      attrs.put(attr.getKey(),attr.getValue());
    }
  }
  AbstractNode node=(AbstractNode)createNodeCommand.execute(attrs);
  if (node != null) {
    logger.log(Level.INFO,"Created node with name {0}, type {1} and id {2}",new Object[]{node.getName(),node.getType(),node.getId()});
  }
 else {
    logger.log(Level.WARNING,"Could not create node with name {0} and type {1}",new Object[]{name,type});
  }
  return node;
}
