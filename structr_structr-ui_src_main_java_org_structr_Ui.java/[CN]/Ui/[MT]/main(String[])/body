{
  try {
    HtmlServlet htmlServlet=new HtmlServlet();
    ServletHolder htmlServletHolder=new ServletHolder(htmlServlet);
    Map<String,String> htmlInitParams=new HashMap<String,String>();
    htmlInitParams.put("Authenticator","org.structr.web.auth.HttpAuthenticator");
    htmlInitParams.put("IdProperty","uuid");
    htmlServletHolder.setInitParameters(htmlInitParams);
    WebSocketServlet wsServlet=new WebSocketServlet();
    ServletHolder wsServletHolder=new ServletHolder(wsServlet);
    Map<String,String> wsInitParams=new HashMap<String,String>();
    wsInitParams.put("Authenticator","org.structr.web.auth.UiAuthenticator");
    wsInitParams.put("IdProperty","uuid");
    wsServletHolder.setInitParameters(wsInitParams);
    Structr.createServer(Ui.class,"structr UI").addServlet("/structr/html/*",htmlServletHolder).addServlet("/structr/ws/*",wsServletHolder).addResourceHandler("src/main/webapp",true,new String[]{"index.html"}).enableRewriteFilter().resourceProvider(UiResourceProvider.class).authenticator(UiAuthenticator.class).start(true);
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
