{
  final SecurityContext securityContext=SecurityContext.getSuperUserInstance();
  Command transactionCommand=Services.command(securityContext,TransactionCommand.class);
  transactionCommand.execute(new StructrTransaction(){
    @Override public Object execute() throws FrameworkException {
      List<Image> images=new LinkedList<Image>();
      for (      AbstractNode node : nodes) {
        if (node instanceof Image) {
          Image image=(Image)node;
          Services.command(securityContext,SaveImageFromUrl.class).execute(image);
          images.add(image);
        }
        Services.command(securityContext,ExtractAndSetImageDimensionsAndFormat.class).execute(images);
      }
      return null;
    }
  }
);
}
