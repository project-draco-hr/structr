{
  try {
    String rawQuery=getStringProperty("query");
    String query=rawQuery;
    boolean matchedKey=false;
    if (request != null) {
      Pattern pattern=Pattern.compile("\\$\\{request.(.*)\\}");
      Matcher matcher=pattern.matcher(rawQuery);
      while (matcher.find()) {
        String key=matcher.group(1);
        System.out.println("key: " + key);
        String value=request.getParameter(key);
        if (StringUtils.isNotEmpty(value)) {
          query=StringUtils.replace(query,"${request." + key + "}",value);
          matchedKey=true;
        }
      }
      if (matchedKey) {
        return (List<GraphObject>)Services.command(securityContext,CypherQueryCommand.class).execute(query);
      }
    }
    return Collections.EMPTY_LIST;
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
  return Collections.emptyList();
}
