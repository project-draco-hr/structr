{
  SecurityContext context=SecurityContext.getSuperUserInstance();
  Command createNodeCommand=Services.command(context,CreateNodeCommand.class);
  Map<String,Object> attrs=new HashMap<String,Object>();
  attrs.put(AbstractNode.Key.type.name(),type);
  attrs.put(AbstractNode.Key.name.name(),name);
  for (  NodeAttribute attr : attributes) {
    attrs.put(attr.getKey(),attr.getValue());
  }
  AbstractNode node=(AbstractNode)createNodeCommand.execute(attrs);
  logger.log(Level.INFO,"Created node with name {0} and id {1}",new Object[]{node.getName(),node.getId()});
  return node;
}
