{
  request.setCharacterEncoding("UTF-8");
  response.setCharacterEncoding("UTF-8");
  Map<String,String[]> parameterMap=request.getParameterMap();
  String path=PathHelper.clean(request.getPathInfo());
  String[] parts=PathHelper.getParts(path);
  String pagePath=parts[parts.length - 1];
  String resp=postToRestUrl(request,pagePath,convert(parameterMap));
  if (resp != null) {
    request.getSession().setAttribute(REST_RESPONSE,resp);
  }
  String name=null;
  try {
    name=PathHelper.getParts(path)[0];
    response.sendRedirect("/" + name + "//"+ pagePath);
  }
 catch (  IOException ex) {
    logger.log(Level.SEVERE,"Could not redirect to " + path,ex);
  }
}
