{
  AbstractRelationship relationship;
  if (graphObject instanceof AbstractRelationship) {
    relationship=(AbstractRelationship)graphObject;
    AbstractNode startNode=relationship.getStartNode();
    AbstractNode endNode=relationship.getEndNode();
    WebSocketMessage message=messageMap.get(transactionKey);
    if (message != null) {
      message.setCommand("ADD");
      message.setGraphObject(relationship);
      message.setId(startNode.getStringProperty("uuid"));
      message.setData("id",endNode.getStringProperty("uuid"));
    }
 else {
      logger.log(Level.WARNING,"No message found for transaction key {0}",transactionKey);
    }
    logger.log(Level.INFO,"{0} -> {1}",new Object[]{startNode.getId(),endNode.getId()});
    return false;
  }
 else {
    WebSocketMessage message=messageMap.get(transactionKey);
    if (message != null) {
      message.setCommand("CREATE");
      message.setGraphObject(graphObject);
      List<GraphObject> list=new LinkedList<GraphObject>();
      list.add(graphObject);
      message.setResult(list);
    }
 else {
      logger.log(Level.WARNING,"No message found for transaction key {0}",transactionKey);
    }
    return false;
  }
}
